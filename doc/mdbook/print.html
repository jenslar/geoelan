<!DOCTYPE HTML>
<html lang="en" class="light sidebar-visible" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>GeoELAN</title>
        <meta name="robots" content="noindex">


        <!-- Custom HTML head -->

        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" id="highlight-css" href="highlight.css">
        <link rel="stylesheet" id="tomorrow-night-css" href="tomorrow-night.css">
        <link rel="stylesheet" id="ayu-highlight-css" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->


        <!-- Provide site root and default themes to javascript -->
        <script>
            const path_to_root = "";
            const default_light_theme = "light";
            const default_dark_theme = "navy";
        </script>
        <!-- Start loading toc.js asap -->
        <script src="toc.js"></script>
    </head>
    <body>
    <div id="body-container">
        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                let theme = localStorage.getItem('mdbook-theme');
                let sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            const default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? default_dark_theme : default_light_theme;
            let theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            const html = document.documentElement;
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add("js");
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            let sidebar = null;
            const sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <!-- populated by js -->
            <mdbook-sidebar-scrollbox class="sidebar-scrollbox"></mdbook-sidebar-scrollbox>
            <noscript>
                <iframe class="sidebar-iframe-outer" src="toc.html"></iframe>
            </noscript>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="default_theme">Auto</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">GeoELAN</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <p><strong>GeoELAN v2.7.7 2025-05-23</strong></p>
<p><strong>Important:</strong></p>
<blockquote>
<p><strong>GoPro Hero 12 Black is not supported</strong> since it does not have a GPS module.</p>
<p><strong>GoPro Hero 13 Black is supported</strong> as soon as I get hold of some raw/unedited sample footage. Initial tests ok.</p>
<p><strong>Garmin VIRB Ultra 30 is discontinued</strong>. GeoELAN will continue to support these and the FIT-format.</p>
</blockquote>
<h2 id="introduction"><a class="header" href="#introduction">Introduction</a></h2>
<p>GeoELAN is a command-line tool that geo-references time-aligned text-annotations of observed phenomena in audiovisual recordings, captured with a recent GoPro or Garmin VIRB action camera, see <a href="https://doi.org/10.1080/13645579.2020.1763705">Larsson et al 2021</a>. In other words, GeoELAN is used for annotating action camera GPS logs with the help of the free annotation tool <a href="https://archive.mpi.nl/tla/elan">ELAN</a>.</p>
<p>Requirements:</p>
<ul>
<li>GoPro Hero 5 Black - GoPro Hero 11 Black, Hero 13 Black (Hero 12 Black is not supported, but some data can still be inspected and plotted)</li>
<li>Garmin VIRB</li>
<li><a href="http://ffmpeg.org">FFmpeg</a> (in <code>PATH</code> preferred, but custom path can also be set when running GeoELAN)</li>
</ul>
<blockquote>
<p>GeoELAN is multi-functional command-line tool that can</p>
<ul>
<li><strong>geo-reference</strong> ELAN-annotations of GoPro and VIRB footage (i.e. annotate GPS logs) and <strong>generate annotated points, lines, or circles</strong>.</li>
<li><strong>inspect</strong> the raw content of your GoPro GPMF data, or Garmin FIT-files.</li>
<li><strong>locate and match</strong> all relevant files belonging to the same recording session irrespective of file name (clips, telemetry-files).</li>
<li>automatically <strong>join clips</strong> (requires FFmpeg) for a specific recording session, and <strong>generate an ELAN-file</strong> with linked media.</li>
</ul>
</blockquote>
<p>Any ELAN annotation - be it an on-site utterance, or a plant in view - can be geo-referenced as long as the GPS logged coordinates within the annotation's timespan. The nature of the workflow also means consultants not physically present at the the time of recording can evaluate and annotate sections to be geo-referenced post-collection. As the name implies, the annotation tool <a href="https://archive.mpi.nl/tla/elan">ELAN</a> plays a central role and is required to annotate events. The output can be points, polylines, or polygons (circles), as <a href="https://www.ogc.org/standards/kml/">KML</a> and <a href="https://geojson.org">GeoJSON-files</a>. "GoPro" refers to a GoPro Hero 5 Black - Hero11 Black, and "VIRB" to the Garmin VIRB Ultra 30.</p>
<blockquote>
<p>While GeoELAN functionality differs slightly between Garmin and GoPro due to differences in formats and file structure,
the general workflow and the final output are the same.</p>
</blockquote>
<h2 id="acknowledgments"><a class="header" href="#acknowledgments">Acknowledgments</a></h2>
<p>GeoELAN was developed with support from the <a href="https://www.rj.se/en/">Bank of Sweden Tercentenary Foundation</a> (Grant nos <a href="https://www.rj.se/en/grants/2015/language-as-key-to-perceptual-diversity-an-interdisciplinary-approach-to-the-senses/">NHS14-1665:1</a> and <a href="https://www.rj.se/en/grants/2017/digital-multimedia-archive-of-austroasiatic-intangible-heritage-phase-ii-seeding-multidisciplinary-workspaces/">IN17-0183:1</a>).</p>
<p>We would also like to acknowledge the <a href="https://archive.mpi.nl/tla/">The Language Archive</a>, Max Planck Institute for Psycholinguistics in Nijmegen for their tireless efforts in developing <a href="https://archive.mpi.nl/tla/elan">ELAN</a>, and making it available for free.</p>
<h2 id="references"><a class="header" href="#references">References</a></h2>
<p>ELAN (Version 6.9) [Computer software]. 2024. Nijmegen: Max Planck Institute for Psycholinguistics, The Language Archive. Retrieved from https://archive.mpi.nl/tla/elan</p>
<p>Larsson, J. 2024. GeoELAN Manual. Lund: Lund University Humanities Lab. <a href="https://github.com/jenslar/geoelan">https://github.com/jenslar/geoelan</a></p>
<p>Larsson et al, 2021. Integrating behavioral and geospatial data on the timeline: towards new dimensions of analysis, <em>International Journal of Social Research Methodology</em>, 24:1, 1-13, DOI: <a href="https://doi.org/10.1080/13645579.2020.1763705">10.1080/13645579.2020.1763705</a></p>
<div style="break-before: page; page-break-before: always;"></div><h2 id="requirements"><a class="header" href="#requirements">Requirements</a></h2>
<ul>
<li>An action camera with a built-in GPS. Supported devices are:
<ul>
<li><a href="https://gopro.com">GoPro</a> Hero Black 5 - Hero 11 Black, Hero 13 Black. (Hero 12 Black is not supported. Max, and Fusion cameras have not been tested)</li>
<li><a href="https://www.garmin.com/en-US/p/522869/pn/010-01529-03">Garmin VIRB Ultra 30</a> (<a href="https://support.garmin.com/en-US/?partNumber=010-01529-03&amp;tab=manuals">documentation</a>) (<strong>discontinued</strong>)</li>
</ul>
</li>
<li><a href="https://archive.mpi.nl/tla/elan">ELAN</a> (<a href="https://archive.mpi.nl/tla/elan/documentation">documentation</a>)</li>
<li><a href="https://www.ffmpeg.org">FFmpeg</a> (for concatenating video)</li>
<li><a href="https://www.rust-lang.org">Rust toolchain</a> (optional, only required for compiling GeoELAN from source)</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h2 id="installation"><a class="header" href="#installation">Installation</a></h2>
<ul>
<li>Download the zip-file from <a href="https://github.com/jenslar/geoelan">https://github.com/jenslar/geoelan</a> or use <code>git clone https://github.com/jenslar/geoelan.git</code>.</li>
<li>See the <code>bin</code> directory for pre-compiled executables for Linux, macOS, and Windows.</li>
</ul>
<h3 id="compile-and-install-from-source"><a class="header" href="#compile-and-install-from-source">Compile and install from source</a></h3>
<p>You can also compile GeoELAN from source. Depending on your operating system, this may require installing additional software, and some understanding of working in a terminal. The basic steps are:</p>
<ol>
<li>Install <a href="https://www.rust-lang.org">the Rust programming language</a></li>
<li>Get the GeoELAN source from <a href="https://github.com/jenslar/geoelan">https://github.com/jenslar/geoelan</a></li>
<li><code>cd geoelan</code> (you should be in the folder containing <code>Cargo.toml</code>)</li>
<li><code>cargo build --release</code></li>
<li><code>cargo install --path .</code> (optional, makes <code>geoelan</code> <a href="https://doc.rust-lang.org/cargo/commands/cargo-install.html">a global command</a>)</li>
</ol>
<div style="break-before: page; page-break-before: always;"></div><h2 id="before-you-start"><a class="header" href="#before-you-start">Before you start</a></h2>
<h3 id="practical-advice"><a class="header" href="#practical-advice">Practical advice</a></h3>
<ul>
<li><strong>Keep the original files</strong>. GeoELAN can only use unedited files, since these contain all telemetry (GPS log, sensor data etc), and identifiers used for synchronisation.
<ul>
<li>Pre-maturely <strong>converting videos will discard both telemetry and identifiers</strong>, which means there is no data for GeoELAN to work with.</li>
<li>Low-resolution clips have a <code>.LRV</code> extension for GoPro, and <code>.GLV</code> for VIRB (these are normal MP4-files).</li>
<li>GeoELAN will automaticall use low-resolution clips for linking in ELAN. Run <code>geoelan cam2eaf --link-high-res</code> to link high-resolution video instead.</li>
</ul>
</li>
<li><strong>You can rename files</strong>. GeoELAN does not use file name when matching files as long as the file extension for video is either <code>.MP4</code>, <code>.LRV</code>, or <code>.GLV</code> (case ignored).</li>
<li><strong>Data locations</strong>:
<ul>
<li><strong>GoPro</strong>: All telemetry is embedded inside the MP4-files.</li>
<li><strong>VIRB</strong>: All telemetry, such as the GPS-log, is stored as a separate FIT-file.</li>
<li><strong>Keep all files on the microSD</strong> unless you are absolutely certain which files are relevant.</li>
</ul>
</li>
</ul>
<h3 id="running-geoelan"><a class="header" href="#running-geoelan">Running GeoELAN</a></h3>
<ul>
<li>GeoELAN is a command line tool and has no graphical user interface.</li>
<li><a href="https://www.ffmpeg.org">FFmpeg</a> is required to concatenate clips. (<code>cam2eaf</code>)</li>
<li>If you use macOS and GeoELAN does not run, see <a href="https://support.apple.com/en-us/HT202491">https://support.apple.com/en-us/HT202491</a> (GeoELAN will be notarised in an upcoming build).</li>
</ul>
<h3 id="device-compatibility"><a class="header" href="#device-compatibility">Device compatibility</a></h3>
<ul>
<li>GoPro: Only "main line" Hero cameras with GPS have been tested, but Max and Fusion cameras may still work.</li>
<li>Garmin: Only VIRB Ultra 30 has been tested extensively, but earlier VIRB models may still work.</li>
</ul>
<h3 id="gps"><a class="header" href="#gps">GPS</a></h3>
<p>Make sure the GPS is turned on and has acquired a satellite lock. This may take a couple of minutes or longer, especially if you have not used the camera for a while or have traveled far between uses.</p>
<p>Verifying a satellite lock:</p>
<ul>
<li>For <strong>VIRB</strong>, the GPS-icon should be steady, not blinking (it may log coordinates while the icon is still blinking, but do not rely on this being the norm).</li>
<li>For <strong>GoPro</strong>, the GPS-icon should be white, not gray. The icon only shows under settings, not on the main screen.</li>
</ul>
<blockquote>
<p>It may be difficult to acquire a satellite lock and/or reliably log position in areas with heavy overhead vegetation or dense cities with very tall buildings. Using a headstrap, instead of a cheststrap, sometimes helps.</p>
</blockquote>
<p>GPS logging behaviour:</p>
<ul>
<li><strong>GoPro</strong> logs dummy coordinates if no lock has been acquired. GeoELAN will not use these.
<ul>
<li>Verify lock by running: <code>geoelan inspect --gpmf PATH/TO/GOPRO.MP4 --gps</code> which will list number of bad points.</li>
</ul>
</li>
<li><strong>VIRB</strong> seems not to log position at all until a satellite lock has been acquired.</li>
</ul>
<h3 id="annotating-in-elan"><a class="header" href="#annotating-in-elan">Annotating in ELAN</a></h3>
<ul>
<li>It is best to limit each kind of observed phenomena you wish to geo-reference to a single ELAN-tier, so...</li>
<li>...to keep e.g. place names and plant sightings within the same ELAN-file, make a separate tier for each (see the example walkthrough in the next section). Then you can just re-run GeoELAN on the same ELAN-file and select another tier to geo-reference along with changing other output options as required.</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h2 id="example-walkthrough"><a class="header" href="#example-walkthrough">Example walkthrough</a></h2>
<p>This section describes how GeoELAN can be used to geo-reference ELAN-annotations. Please refer to the detailed sections if you get stuck. Remember that all input video clips must be the unprocessed, original MP4 (GoPro + VIRB) and FIT-files (VIRB). The so-called FIT-files mentioned throughout this manual are where the VIRB logs GPS-data and other kinds of telemetry during a recording session. These need to be matched to the corresponding video recording. GeoELAN will help with all of this, with the exception of annotating your data.</p>
<p>Note that some commands differ slightly between GoPro and VIRB.</p>
<p>The basic steps are:</p>
<ol>
<li>Record video with a recent GoPro or VIRB.</li>
<li>Use GeoELAN to concatenate the video clips and generate an ELAN-file.</li>
<li>Annotate spatially interesting sections in ELAN.</li>
<li>Use GeoELAN to geo-reference the annotations, resulting in annotated KML and GeoJSON files.</li>
</ol>
<p>Input files (example file names, naming convention may differ sligtly depending on model):</p>
<ul>
<li><strong>GoPro</strong>:
<ul>
<li><code>GH010026.MP4</code>, any clip in a recording session (remaining clips located automatically)</li>
</ul>
</li>
<li><strong>VIRB</strong>:
<ul>
<li><code>VIRB0001-1.MP4</code>, any clip in a recording session (remaining clips located automatically)</li>
<li>FIT-file with corresponding GPS-data (located automatically)</li>
</ul>
</li>
</ul>
<p>Output files:</p>
<ul>
<li><strong>GoPro + VIRB</strong>:
<ul>
<li>KML and GeoJSON files with ELAN annotation content synchronised and mapped to the corresponding points as descriptions.</li>
</ul>
</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h2 id="step-13-generate-an-elan-file-with-linked-media-files"><a class="header" href="#step-13-generate-an-elan-file-with-linked-media-files">Step 1/3: Generate an ELAN-file with linked media files</a></h2>
<p>In step 1 we will locate all video clips (GoPro + VIRB) and FIT-files (VIRB) that belong to a specific recording session. Video clips are then joined, and linked in the resulting ELAN-file.</p>
<h3 id="command"><a class="header" href="#command">Command</a></h3>
<p><strong>Command</strong></p>
<pre><code class="language-sh">geoelan cam2eaf --video INDIR/VIRB_OR_GOPRO_CLIP.MP4 --indir INDIR/ --outdir OUTDIR/
</code></pre>
<p><strong>Output files GoPro</strong></p>
<pre><code>OUTDIR/GH010026/
├── GH010026.mp4             High-resolution video (concatenated)
├── GH010026_LO.mp4          Low-resolution video for ELAN (concatenated)
├── GH010026.wav             Extracted audio for ELAN (concatenated)
├── GH010026.eaf             ELAN-file with pre-linked media files
├── GH010026.kml             KML-file with all points logged for the session
├── GH010026.json            GeoJSON-file with all points logged for the session
└── GH010026.txt             FFmpeg concatenation file, paths to input clips
</code></pre>
<p><strong>Output files VIRB</strong></p>
<pre><code>OUTDIR/VIRB0001-1/
├── 2017-05-29-13-05-42.fit  FIT-file with corresponding telemetry
├── VIRB0001-1.mp4           High-resolution video (concatenated)
├── VIRB0001-1_LO.mp4        Low-resolution video for ELAN (concatenated)
├── VIRB0001-1.wav           Extracted audio for ELAN (concatenated)
├── VIRB0001-1.eaf           ELAN-file with pre-linked media files
├── VIRB0001-1.kml           KML-file with all points logged for the session
├── VIRB0001-1.json          GeoJSON-file with all points logged for the session
└── VIRB0001-1.txt           FFmpeg concatenation file, paths to input clips
</code></pre>
<h3 id="explanation-of-the-command"><a class="header" href="#explanation-of-the-command">Explanation of the command</a></h3>
<p>The relevant sub-command is <code>cam2eaf</code>. Run <code>geoelan cam2eaf --help</code> for an overview.</p>
<p>By specifying any clip in the recording session  via <code>--video</code>, the remaining clips (GoPro + VIRB), including the corresponding FIT-file (VIRB), will be automatically located and joined, if they exist in the input directory <code>INDIR/</code>, including sub-directories. The result, including an ELAN-file with linked media files, will be saved to the output directory <code>OUTDIR/</code>.</p>
<p>If low-resolution clips (<code>.GLV</code>/<code>.LRV</code>) are located, these will be linked in the ELAN-file. If not, the high-resolution video will be linked instead.</p>
<p>GeoELAN defaults to <em>not</em> insert a tier with geo-data in the ELAN-file due to the effect this may have on performance. To do so, use the <code>--geotier</code> flag (see <em>Geo-data in ELAN</em>).</p>
<blockquote>
<p><strong>TIP:</strong> For longer recording sessions or when batching, resulting in many video clips, step 1 is usually much faster if <code>--indir</code> and <code>--outdir</code> is not on the same physical hard drive. Those with an <a href="https://en.wikipedia.org/wiki/Solid-state_drive">SSD</a> (standard on most modern laptops) should be fine running step 1. on a single drive however.</p>
</blockquote>
<div style="break-before: page; page-break-before: always;"></div><h2 id="step-23-annotate-events-in-elan"><a class="header" href="#step-23-annotate-events-in-elan">Step 2/3: Annotate events in ELAN</a></h2>
<p>Next, use ELAN with the ELAN-file from step 1 to annotate events that should be geo-referenced in step 3. Feel free to create any tier structure you may need. Tokenized tiers can not be geo-referenced, but otherwise any tier is fine, including deeply nested, referred tiers.</p>
<p>GeoELAN will geo-reference annotations from a single tier (selectable in step 3). Thus, if you want to generate a KML/GeoJSON-file with e.g. indigenous place names mentioned on-site during the recording, those place names must be limited to a single tier. If there are other spatial categories or groupings you wish to explore, simply create a new tier for each. In step 3 you can then re-run GeoELAN as many times as required, then select a different tier and/or options on each run.</p>
<p>When the annotations are geo-referenced in step 3, the annotation values in the selected tier will be used as descriptions for the synchronized, corresponding points in the KML and GeoJSON-files. Points corresponding to unannotated sections of the ELAN-file will either be discarded or have no description, depending on which options you use in step 3.</p>
<p>An annotated event can relate to anything observed in the recording and can be represented as either points or polylines in the output KML-file. If you are unsure which best applies to what you have in mind for your data, or how this may affect how you annotate, here are a few ideas for each kind.</p>
<blockquote>
<p><strong>Points</strong> could concern documenting:</p>
<ul>
<li><strong>the location of a plant or a geographical feature</strong>, e.g. annotate the timespan either is visible in the video.</li>
<li><strong>an uttered place name or an animal cry</strong>, e.g. annotate the timespan of the on-site utterance or cry.</li>
</ul>
<p>For these specific cases, the exact time spans of the annotations are not that important. It should be enough to ensure the annotation lasts for the duration of the place name being uttered, or for as long as the plant is visible. If unsure, add a another second to the annotation timespan. An average coordinate will be calculated for those that were logged within each annotation's time span, so as long as the camera wearer does not stray too far from the observation point, the result should be accurate enough.</p>
<p><strong>Lines</strong> could concern documenting:</p>
<ul>
<li>various <strong>types of movement through the landscape</strong>. To annotate the movement of "walking up-hill" as it is observed visually in the recording, set the annotation's start time at the bottom of the hill and its end at the top, or for as long as the motion can be observed.</li>
<li>a <strong>narrative reflecting on the immediate surroundings</strong> as they change over time. E.g. comments on visible landscape features, or perhaps the re-construction of an historical event as it unfolded over space and time.</li>
</ul>
</blockquote>
<div style="break-before: page; page-break-before: always;"></div><h2 id="step-33-generate-a-kml-file-from-geo-referenced-elan-annotations"><a class="header" href="#step-33-generate-a-kml-file-from-geo-referenced-elan-annotations">Step 3/3: Generate a KML-file from geo-referenced ELAN annotations</a></h2>
<p>Now that we have a few annotations, GeoELAN will geo-referenence these by determining which points were logged within each annotation's timespan. Note the different commands between GoPro and VIRB.</p>
<p>This is where you choose the approriate geographical representations for your annotated phenomena. Here are suggestions for the examples in step 2.</p>
<blockquote>
<p><strong>Points</strong>:</p>
<ul>
<li>the location of a plant or a geographical feature</li>
<li>an uttered place name or an animal cry</li>
</ul>
<p>To get a single, average coordinate for each annotation, use the <code>--geoshape point-single</code> option.</p>
<p><strong>Lines</strong>:</p>
<ul>
<li>types of movement through the landscape</li>
<li>narrative reflecting on the immediate surroundings</li>
</ul>
<p>Two line options may apply to the above. To get a continuous polyline alternating between marked (annotated) and unmarked (un-annotated) events, use the option <code>--geoshape line-all</code>. To get a broken-up polyline representing marked events only, use the option <code>--geoshape line-multi</code>.</p>
</blockquote>
<p>There are other options, such as <em>circle</em> output. It is the same as point output with the difference that radius and height can be specified (all circles will have the same size). For a more detailed overview of the possibilities, see the <code>--geoshape</code> option for the command <em>eaf2geo</em>. Experiment! If you realise one representation is not appropriate after all, re-run GeoELAN with a different option.</p>
<h3 id="gopro"><a class="header" href="#gopro">GoPro</a></h3>
<p><strong>Command</strong></p>
<pre><code class="language-sh">geoelan eaf2geo --eaf GH010026.eaf --gpmf INDIR/GH010026.MP4  --geoshape point-single
</code></pre>
<blockquote>
<p><strong>Important:</strong> <code>GH010026.MP4</code> <strong>must be an unedited GoPro clip from the recording session</strong>, as it was generated by the camera, <strong>not</strong> the video linked in your ELAN file. E.g. the same one specified in step 1.</p>
</blockquote>
<p><strong>Output files</strong></p>
<pre><code>OUTDIR/GH010026/
├── ...                            Existing files
├── GH010026_point-single.kml      New KML-file, one point per annotation in the selected tier
└── GH010026_point-single.geojson  New GeoJSON-file, one point per annotation in the selected tier
</code></pre>
<h3 id="virb"><a class="header" href="#virb">VIRB</a></h3>
<p><strong>Command</strong></p>
<pre><code class="language-sh">geoelan eaf2geo --eaf VIRB0001-1.eaf --fit 2003-01-02-12-00-00.fit --geoshape point-single
</code></pre>
<p><strong>Output files</strong></p>
<pre><code>OUTDIR/VIRB0001-1/
├── ...                              Existing files
├── VIRB0001-1_point-single.kml      New KML-file, one point per annotation in the selected tier
└── VIRB0001-1_point-single.geojson  New GeoJSON-file, one point per annotation in the selected tier
</code></pre>
<h3 id="explanation-of-the-command-1"><a class="header" href="#explanation-of-the-command-1">Explanation of the command</a></h3>
<p>The relevant sub-command is <code>eaf2geo</code>. Run <code>geoelan eaf2geo --help</code> for an overview.</p>
<p>GeoELAN geo-references all annotations in a single tier (you will be prompted to select tier from a list) for the specified ELAN-file, then generates annotated KML and GeoJSON files where each point represents a single annotation.</p>
<p>By specifying an ELAN-file (<code>--eaf</code>) and an original, unedited GoPro MP4-clip (<code>--gpmf</code>) or VIRB FIT-file (<code>--fit</code>), GeoELAN will synchronise the annotations with the coordinates contained within the MP4/FIT-file. Similar to step 1, all files will be automatically located.</p>
<p><code>--geoshape point-single</code> tells GeoELAN to distill each annotation into a single point (an average of all points withing the annotation timespan). The generated KML/GeoJSON-file will contain as many points as there are annotations in the selected tier. Each point inherits the corresponding annotation value as its description. The KML-file is named according to the selected <code>--geoshape</code> option, in this case <code>GH010026_point-single.kml</code>/<code>VIRB0001-1_point-single.kml</code>.</p>
<p>For the example command for VIRB, the user will be presented with a list of recording sessions present in the FIT-file (see <em>The FIT-format and the Garmin VIRB</em>). For GoPro, specifying an original clip, e.g. the same one specified in step 1, is enough.</p>
<div style="break-before: page; page-break-before: always;"></div><h2 id="commands"><a class="header" href="#commands">Commands</a></h2>
<div class="table-wrapper"><table><thead><tr><th style="text-align: center">Command</th><th style="text-align: center">Alias</th><th style="text-align: left">Description</th></tr></thead><tbody>
<tr><td style="text-align: center"><code>cam2eaf</code></td><td style="text-align: center"><code>g2e</code></td><td style="text-align: left">Generate an ELAN-file, and link concatenated media files</td></tr>
<tr><td style="text-align: center"><code>eaf2geo</code></td><td style="text-align: center"><code>e2g</code></td><td style="text-align: left">Geo-reference ELAN-annotations and generate annotated KML/GeoJSON</td></tr>
<tr><td style="text-align: center"><code>locate</code></td><td style="text-align: center"><code>l</code></td><td style="text-align: left">Locate and match video clips and/or FIT-files</td></tr>
<tr><td style="text-align: center"><code>inspect</code></td><td style="text-align: center"><code>i</code></td><td style="text-align: left">Inspect the telemetry of a GoPro MP4-file or any Garmin FIT-file</td></tr>
<tr><td style="text-align: center"><code>plot</code></td><td style="text-align: center"><code>p</code></td><td style="text-align: left">Plot the telemetry of a GoPro MP4-file or any Garmin FIT-file</td></tr>
<tr><td style="text-align: center"><code>manual</code></td><td style="text-align: center"><code>m</code></td><td style="text-align: left">View or save this manual to disk</td></tr>
</tbody></table>
</div>
<p>Run <code>geoelan --help</code> for a general overview, or <code>geoelan &lt;COMMAND&gt; --help</code>, for an overview of a specific command.</p>
<p>The most relevant commands are probably <code>cam2eaf</code> and <code>eaf2geo</code>. <code>locate</code> is there to help with locating and matching video clips and/or FIT-files that belong to the same recording session, but this functionality partly exists in <code>cam2eaf</code> as well. <code>inspect</code> can be used to print various kinds of data in a GoPro MP4/Garmin FIT-file, but will do so in an unprocessed form. It is intended more as a technical aid for troubleshooting or to verify the contents of MP4/FIT-files. <code>plot</code> is used to plot sensor data and some of the GPS data, such as altitude over time. <code>manual</code> is for viewing or saving the full manual.</p>
<blockquote>
<p>Note that some parameters in the following sections may only be valid for e.g. GoPro cameras, not VIRB, and vice versa. The description column will be prefixed [GoPro] or [VIRB] to denote this.</p>
</blockquote>
<h3 id="set-gopro-satellite-lock---gpsfix-and-dilution-of-precision---gpsdop-thresholdsldosfhds"><a class="header" href="#set-gopro-satellite-lock---gpsfix-and-dilution-of-precision---gpsdop-thresholdsldosfhds">Set GoPro satellite lock (<code>--gpsfix</code>) and dilution of precision (<code>--gpsdop</code>) thresholdsldosfhds</a></h3>
<p>GoPro cameras log how well they can see satellites.</p>
<p>If no satellite is in line of sight, the camera will log dummy coordinates. GeoELAN will ignore these by default, and for <code>cam2eaf</code> a '3D lock' (altitude is included) is the default. In cases where only 2D lock could be achieved, one can manually set minimum "lock level" via <code>--gpsfix</code>. Valid values are <code>0</code> (no lock), <code>2</code> (2D lock), and <code>3</code> (3D lock). Setting to <code>0</code> will result in unusable data for <code>eaf2geo</code> if most coordinates are bad.</p>
<p>Similarly, <a href="https://en.wikipedia.org/wiki/Dilution_of_precision_(navigation)">dilution of precision</a> (DOP) is a value that represent how tightly clustered the satellites are. A lower value is better. Ideally, it should be below 5.0. There is no default value set, but if coordinates seem erratic, the maximum DOP value can be manually set via <code>--gpsdop</code>. E.g. perhaps try 10.0 and gradually go lower.</p>
<h3 id="time-adjustment-with---time-offset"><a class="header" href="#time-adjustment-with---time-offset">Time adjustment with <code>--time-offset</code></a></h3>
<p>If the action camera has not adjusted for the current time zone, several commands have a <code>--time-offset</code> option. It takes a +/- value in hours that will be applied to all timestamps in the output, e.g. <code>--time-offset 7</code> will add seven hours to all timestamps.</p>
<h3 id="reducing-the-number-of-coordinates-with---downsample"><a class="header" href="#reducing-the-number-of-coordinates-with---downsample">Reducing the number of coordinates with <code>--downsample</code></a></h3>
<p>The command <code>eaf2geo</code> outputs coordinates as KML and GeoJSON files. Since supported cameras log at either 10 or 18Hz, a 2 hour recording may contain more than 70 000 logged points. The <code>--downsample</code> parameter can be used to reduce the number of coordinates exported. Google Earth does not cope well with a large amount of points, whereas dedicated GIS software such as QGIS, usually will.</p>
<p><code>--downsample</code> takes a positive numerical value that is effectively a divisor: <code>--downsample 10</code> means an average coordinate will be calculated for every cluster of 10 points. For 70 000 logged points, a value of 100 means the output will contain 700 averaged points and so on. If the user sets <code>--downsample</code> to a value that exceeds the total number of points logged by the GPS, it will be changed to the largest applicable value (resulting in a single point for the entire recording as opposed to none at all).</p>
<blockquote>
<p>Extreme values may affect the result in unexpected ways, depending on gaps in and/or quality of the GPS-data.</p>
</blockquote>
<p>VIRB Ultra 30 logs at 10Hz, and GoPro logs at 10 or 18Hz depending on model. Only VIRB Ultra 30 and GoPro Hero 11 (10Hz) and later timestamp each individual point, whereas earlier models only timestamp a cluster of points. In the latter case, GeoELAN average each cluster to a single, timestamped point, resulting in roughly 1 point/second.</p>
<h3 id="if-cam2eaf-or-eaf2geo-return-errors"><a class="header" href="#if-cam2eaf-or-eaf2geo-return-errors">If 'cam2eaf' or 'eaf2geo' return errors</a></h3>
<p>Try the <code>inspect</code> command on problematic MP4/FIT-files. This way you can verify whether points were actually logged or not. If the file is corrupt the error message will also be printed.</p>
<h3 id="ffmpeg"><a class="header" href="#ffmpeg">FFmpeg</a></h3>
<p>The command <code>cam2eaf</code> requires <a href="https://ffmpeg.org">FFmpeg</a>. See the <a href="./04d_ffmpeg.html#ffmpeg">appendix under <em>FFmpeg</em></a> on how to install. If you intend to use the <em>static build</em>, point to it using <code>--ffmpeg PATH/TO/FFMPEG/ffmpeg</code> (<code>ffmpeg.exe</code> on Windows). If the <code>--ffmpeg</code> option is not used, <code>geoelan</code> will assume <code>ffmpeg</code> is available as a global command and complain accordingly if it is not.</p>
<blockquote>
<p><strong>TIP:</strong> GeoELAN will never overwrite existing files without permission. Should you accidentally delete the generated ELAN-file with the output media files intact, just re-run the <code>cam2eaf</code> command. It will automatically skip concatenating videos, but still generate a new ELAN-file.</p>
</blockquote>
<blockquote>
<p><strong>TIP:</strong> In the tables for the respective command sections, arguments listed under 'Flags' do not take a value, whereas those listed under 'Options' do. If a <code>default</code> value is listed, it will be automatically set, unless the user specifies otherwise.</p>
</blockquote>
<div style="break-before: page; page-break-before: always;"></div><h2 id="cam2eaf"><a class="header" href="#cam2eaf">cam2eaf</a></h2>
<blockquote>
<ul>
<li><em>Command/alias:</em> <code>cam2eaf</code> / <code>c2e</code></li>
<li><em>Help:</em> <code>geoelan cam2eaf --help</code></li>
<li><em>Basic usage:</em> <code>geoelan cam2eaf --indir INDIR/ --video GH010006.MP4 --outdir OUTDIR/</code></li>
</ul>
</blockquote>
<p><code>cam2eaf</code> generates an ELAN-file with pre-linked media files. All clips in the specified recording session will be automatically located, grouped, and concatenated. A WAV-file from the full video is also extracted. By default the low-resolution footage is used (if found), use the <code>--link-high-res</code> flag to link the high-resolution footage. The corresponding coordinates can optionally be added a tier.</p>
<p><strong>Flags</strong></p>
<div class="table-wrapper"><table><thead><tr><th style="text-align: center">Short</th><th style="text-align: left">Long</th><th style="text-align: left">Description</th></tr></thead><tbody>
<tr><td style="text-align: center"></td><td style="text-align: left"><code>--dryrun</code></td><td style="text-align: left">Show results but do not process or copy files</td></tr>
<tr><td style="text-align: center"></td><td style="text-align: left"><code>--fullgps</code></td><td style="text-align: left">Use the full-res GPS log for the ELAN geotier</td></tr>
<tr><td style="text-align: center"></td><td style="text-align: left"><code>--geotier</code></td><td style="text-align: left">Insert tier with synchronised coordinates in ELAN-file</td></tr>
<tr><td style="text-align: center"></td><td style="text-align: left"><code>--link-high-res</code></td><td style="text-align: left">Link high-resolution video in ELAN-file</td></tr>
<tr><td style="text-align: center"><code>-l</code></td><td style="text-align: left"><code>--low-res-only</code></td><td style="text-align: left">Only concatenate low-res clips (<code>.LRV</code>/<code>.GLV</code>), ignores high-res clips</td></tr>
<tr><td style="text-align: center"></td><td style="text-align: left"><code>--single</code></td><td style="text-align: left">Only use the specified clip, ignore remaining clips in session</td></tr>
<tr><td style="text-align: center"></td><td style="text-align: left"><code>--verify</code></td><td style="text-align: left">[GoPro] Verify GPMF data, ignore corrupt clips</td></tr>
</tbody></table>
</div>
<p><strong>Options</strong></p>
<div class="table-wrapper"><table><thead><tr><th style="text-align: center">Short</th><th style="text-align: left">Long</th><th style="text-align: left">Description</th><th style="text-align: center">Default</th><th style="text-align: center">Required</th></tr></thead><tbody>
<tr><td style="text-align: center"></td><td style="text-align: left"><code>--ffmpeg</code></td><td style="text-align: left">Custom path to FFmpeg</td><td style="text-align: center"><code>ffmpeg</code></td><td style="text-align: center"></td></tr>
<tr><td style="text-align: center"><code>-i</code></td><td style="text-align: left"><code>--indir</code></td><td style="text-align: left">Input path for locating files</td><td style="text-align: center"></td><td style="text-align: center">yes</td></tr>
<tr><td style="text-align: center"><code>-o</code></td><td style="text-align: left"><code>--outdir</code></td><td style="text-align: left">Output path for resulting files</td><td style="text-align: center"><code>geoelan</code></td><td style="text-align: center"></td></tr>
<tr><td style="text-align: center"><code>-t</code></td><td style="text-align: left"><code>--time-offset</code></td><td style="text-align: left">Time offset in +/- hours</td><td style="text-align: center"><code>0</code></td><td style="text-align: center"></td></tr>
<tr><td style="text-align: center"><code>-v</code></td><td style="text-align: left"><code>--video</code></td><td style="text-align: left">Clip in the relevant session</td><td style="text-align: center"></td><td style="text-align: center">unless <code>-f</code> or <code>-u</code></td></tr>
<tr><td style="text-align: center"></td><td style="text-align: left"><code>--gpsfix</code></td><td style="text-align: left">[GoPro] Minimum satellite lock</td><td style="text-align: center"><code>3</code></td><td style="text-align: center"></td></tr>
<tr><td style="text-align: center"><code>-f</code></td><td style="text-align: left"><code>--fit</code></td><td style="text-align: left">[VIRB] FIT-file</td><td style="text-align: center"></td><td style="text-align: center">unless <code>-u</code> or <code>-v</code></td></tr>
<tr><td style="text-align: center"><code>-u</code></td><td style="text-align: left"><code>--uuid</code></td><td style="text-align: left">[VIRB] UUID for a clip in the relevant session</td><td style="text-align: center"></td><td style="text-align: center">unless <code>-f</code> or <code>-v</code></td></tr>
</tbody></table>
</div>
<h3 id="example-gopro"><a class="header" href="#example-gopro">Example GoPro</a></h3>
<p><strong>GoPro example</strong></p>
<div class="table-wrapper"><table><thead><tr><th style="text-align: center"></th><th style="text-align: center"></th><th style="text-align: center"></th><th style="text-align: center"></th><th style="text-align: center"></th><th style="text-align: center"></th></tr></thead><tbody>
<tr><td style="text-align: center"><code>geoelan</code></td><td style="text-align: center"><code>cam2eaf</code></td><td style="text-align: center"><code>-v GH010026.MP4</code></td><td style="text-align: center"><code>-i INDIR/</code></td><td style="text-align: center"><code>-o OUTDIR/</code></td><td style="text-align: center"><code>--geotier</code></td></tr>
<tr><td style="text-align: center"></td><td style="text-align: center">command</td><td style="text-align: center">clip in session</td><td style="text-align: center">input directory</td><td style="text-align: center">output directory</td><td style="text-align: center">insert coordinate tier</td></tr>
</tbody></table>
</div>
<p><strong>Result:</strong> Locates all clips for the recording session containing the clip <code>GH010026.MP4</code> (<code>-g</code>) in the input directory <code>INDIR/</code> (<code>-i</code>). These will be concatenated, and the audio track exported as a WAV for use in ELAN. The resulting files are then copied to the output directory <code>OUTDIR/</code> (<code>-o</code>). The generated ELAN-file will also have synchronised coordinates inserted as a tier (<code>--geotier</code>).</p>
<h3 id="examples-virb"><a class="header" href="#examples-virb">Examples VIRB</a></h3>
<blockquote>
<p>Recording session can be specified using one of <code>--fit</code>, <code>--uuid</code>, <code>--video</code>. These options are mutually exclusive. <code>--fit</code> returns a list of sessions present in the FIT-file, from which the user can select the relevant one. <code>--uuid</code> and <code>--video</code> require no further user input. UUID is the unique VIRB clip identifier and can be retreived by running <code>geoelan inspect --video VIRB0001-1.MP4</code>.</p>
</blockquote>
<blockquote>
<p>Using <code>--fullgps</code> (together with <code>--geotier</code>) may slow down ELAN considerably.</p>
</blockquote>
<p><strong>VIRB example 1</strong></p>
<div class="table-wrapper"><table><thead><tr><th style="text-align: center"></th><th style="text-align: center"></th><th style="text-align: center"></th><th style="text-align: center"></th><th style="text-align: center"></th><th style="text-align: center"></th></tr></thead><tbody>
<tr><td style="text-align: center"><code>geoelan</code></td><td style="text-align: center"><code>cam2eaf</code></td><td style="text-align: center"><code>-v VIRB0001-1.MP4</code></td><td style="text-align: center"><code>-i INDIR/</code></td><td style="text-align: center"><code>-o OUTDIR/</code></td><td style="text-align: center"><code>--geotier</code></td></tr>
<tr><td style="text-align: center"></td><td style="text-align: center">command</td><td style="text-align: center">clip in session</td><td style="text-align: center">input directory</td><td style="text-align: center">output directory</td><td style="text-align: center">insert coordinate tier</td></tr>
</tbody></table>
</div>
<p><strong>Result:</strong> Locates all clips for the recording session containing the clip <code>VIRB0001-1.MP4</code> (<code>-v</code>) in the input directory <code>INDIR/</code> (<code>-i</code>). These will be concatenated, and the audio track exported as a WAV for use in ELAN. The resulting files are then copied together with the corresponding FIT-file to the output directory <code>OUTDIR/</code> (<code>-o</code>). The generated ELAN-file will also have synchronised coordinates inserted as a tier (<code>--geotier</code>).</p>
<p><strong>VIRB example 2</strong></p>
<div class="table-wrapper"><table><thead><tr><th style="text-align: center"></th><th style="text-align: center"></th><th style="text-align: center"></th><th style="text-align: center"></th><th style="text-align: center"></th><th style="text-align: center"></th></tr></thead><tbody>
<tr><td style="text-align: center"><code>geoelan</code></td><td style="text-align: center"><code>cam2eaf</code></td><td style="text-align: center"><code>-f 2017-01-28-05-16-40.FIT</code></td><td style="text-align: center"><code>-i INDIR/</code></td><td style="text-align: center"><code>-o OUTDIR/</code></td><td style="text-align: center"><code>-l</code></td></tr>
<tr><td style="text-align: center"></td><td style="text-align: center">command</td><td style="text-align: center">FIT-file</td><td style="text-align: center">input directory</td><td style="text-align: center">output directory</td><td style="text-align: center">ignore hi-res MP4</td></tr>
</tbody></table>
</div>
<p><strong>Result</strong>: Recording session is specified via the FIT-file <code>2017-01-28-05-16-40.fit</code> (<code>-f</code>). The user will be prompted to select session from a list, allowing GeoELAN to locate the corresponding clips in the input directory <code>INDIR/</code> (<code>-i</code>). Only the low-resolution clips (<code>--low-res-only</code>) will be concatenated. All resulting files are then copied together with the corresponding FIT-file to the output directory <code>OUTDIR/</code> (<code>-o</code>).</p>
<blockquote>
<p>If you are unsure of the whereabouts of the FIT-file, make the search wider. Specifying the root of an external hard drive as input directory (<code>--indir</code>) will make the search process take slightly longer, but should work well. Otherwise, just specify the FIT-file separately (<code>--fit</code>), which can be useful if it is located outside of the input directory.</p>
</blockquote>
<div style="break-before: page; page-break-before: always;"></div><h2 id="eaf2geo"><a class="header" href="#eaf2geo">eaf2geo</a></h2>
<blockquote>
<ul>
<li><em>Command/alias:</em> <code>eaf2geo</code> / <code>e2g</code></li>
<li><em>Help:</em> <code>geoelan eaf2geo --help</code></li>
<li><em>Basic usage:</em> <code>geoelan eaf2geo --eaf VIRB0001-1.eaf --fit 2017-01-28-05-16-40.fit</code></li>
</ul>
</blockquote>
<p><code>eaf2geo</code> generates KML and GeoJSON files by geo-referencing all annotations in the specified tier. The user is presented with a list of all tiers in the ELAN-file to select from. Referred tiers are fine, but tokenized tiers can not be used, since these lack meaningful time stamps. Several output options exist via the <code>--geoshape</code> option, such as points or polylines (see below). In the resulting KML and GeoJSON files, any point that intersects with an annotation's timespan will inherit the annotation value as a description.</p>
<p><strong>Flags</strong></p>
<div class="table-wrapper"><table><thead><tr><th style="text-align: center">Short</th><th style="text-align: center">Long</th><th style="text-align: center">Description</th></tr></thead><tbody>
<tr><td style="text-align: center"></td><td style="text-align: center"><code>--cdata</code></td><td style="text-align: center">KML-option, added visuals in Google Earth</td></tr>
</tbody></table>
</div>
<p><strong>Options</strong></p>
<div class="table-wrapper"><table><thead><tr><th style="text-align: center">Short</th><th style="text-align: center">Long</th><th style="text-align: left">Description</th><th style="text-align: center">Default</th><th style="text-align: center">Possible</th><th style="text-align: center">Required</th></tr></thead><tbody>
<tr><td style="text-align: center"><code>-d</code></td><td style="text-align: center"><code>--downsample</code></td><td style="text-align: left">Downsample factor for coordinates</td><td style="text-align: center"><code>1</code></td><td style="text-align: center"></td><td style="text-align: center"></td></tr>
<tr><td style="text-align: center"><code>-e</code></td><td style="text-align: center"><code>--eaf</code></td><td style="text-align: left">ELAN-file</td><td style="text-align: center"></td><td style="text-align: center"></td><td style="text-align: center">yes</td></tr>
<tr><td style="text-align: center"><code>-f</code></td><td style="text-align: center"><code>--fit</code></td><td style="text-align: left">[VIRB] FIT-file</td><td style="text-align: center"></td><td style="text-align: center"></td><td style="text-align: center">unless <code>-g</code></td></tr>
<tr><td style="text-align: center"><code>-g</code></td><td style="text-align: center"><code>--gpmf</code></td><td style="text-align: left">[GoPro] MP4-file</td><td style="text-align: center"></td><td style="text-align: center"></td><td style="text-align: center">unless <code>-f</code></td></tr>
<tr><td style="text-align: center"></td><td style="text-align: center"><code>--geoshape</code></td><td style="text-align: left">Output options for KML-file</td><td style="text-align: center"><code>point-all</code></td><td style="text-align: center"><code>point-all</code>, <code>point-multi</code>, <code>point-single</code>, <code>line-all</code>, <code>line-multi</code>, <code>circle-2d</code>, <code>circle-3d</code></td><td style="text-align: center"></td></tr>
<tr><td style="text-align: center"></td><td style="text-align: center"><code>--height</code></td><td style="text-align: left">Circle height (<code>circle-3d</code>)</td><td style="text-align: center"><code>10.0</code></td><td style="text-align: center"></td><td style="text-align: center"></td></tr>
<tr><td style="text-align: center"></td><td style="text-align: center"><code>--radius</code></td><td style="text-align: left">Circle radius (<code>circle-2d</code>, <code>circle-3d</code>)</td><td style="text-align: center"><code>2.0</code></td><td style="text-align: center"></td><td style="text-align: center"></td></tr>
<tr><td style="text-align: center"><code>-t</code></td><td style="text-align: center"><code>--time-offset</code></td><td style="text-align: left">Time offset, +/- hours</td><td style="text-align: center"><code>0</code></td><td style="text-align: center"></td><td style="text-align: center"></td></tr>
<tr><td style="text-align: center"></td><td style="text-align: center"><code>--vertices</code></td><td style="text-align: left">Circle vertices/roundness ('circle-2d', 'circle-3d')</td><td style="text-align: center"><code>40</code></td><td style="text-align: center"></td><td style="text-align: center"></td></tr>
</tbody></table>
</div>
<p><strong>GoPro example</strong></p>
<div class="table-wrapper"><table><thead><tr><th style="text-align: center"></th><th style="text-align: center"></th><th style="text-align: center"></th><th style="text-align: center"></th><th style="text-align: center"></th></tr></thead><tbody>
<tr><td style="text-align: center"><code>geoelan</code></td><td style="text-align: center"><code>eaf2geo</code></td><td style="text-align: center"><code>-g GH010026.MP4</code></td><td style="text-align: center"><code>-e GH010026.eaf</code></td><td style="text-align: center"><code>--geoshape line-all</code></td></tr>
<tr><td style="text-align: center"></td><td style="text-align: center">command</td><td style="text-align: center">original GoPro MP4-file</td><td style="text-align: center">ELAN-file</td><td style="text-align: center">output option</td></tr>
</tbody></table>
</div>
<p><strong>Result</strong>: Geo-references annotations in the ELAN-file <code>GH010026.eaf</code> (<code>-e</code>) and generates KML and GeoJSON files with a continous poly-line, alternating between marked (annotated) and unmarked (un-annotated) sections (<code>--geoshape line-all</code>).</p>
<hr />
<p><strong>VIRB example</strong></p>
<div class="table-wrapper"><table><thead><tr><th style="text-align: center"></th><th style="text-align: center"></th><th style="text-align: center"></th><th style="text-align: center"></th><th style="text-align: center"></th></tr></thead><tbody>
<tr><td style="text-align: center"><code>geoelan</code></td><td style="text-align: center"><code>eaf2geo</code></td><td style="text-align: center"><code>-f 2017-01-28-05-16-40.fit</code></td><td style="text-align: center"><code>-e VIRB0001-1.eaf</code></td><td style="text-align: center"><code>--geoshape point-single</code></td></tr>
<tr><td style="text-align: center"></td><td style="text-align: center">command</td><td style="text-align: center">FIT-file</td><td style="text-align: center">ELAN-file</td><td style="text-align: center">output option</td></tr>
</tbody></table>
</div>
<p><strong>Result</strong>: Geo-references annotations in the ELAN-file <code>VIRB0001-1.eaf</code> (<code>-e</code>) and generates KML and GeoJSON files with a single point per annotation (<code>--geoshape point-single</code>). Since no original VIRB clip is specified, the user will be presented with a list of clip UUIDs in the specified FIT-file <code>2017-01-28-05-16-40.fit</code> (<code>-f</code>) to choose from. It should be fairly straight forward to guess which session is relevant.</p>
<hr />
<div style="break-before: page; page-break-before: always;"></div><h2 id="the-geoshape-option"><a class="header" href="#the-geoshape-option">The <em>geoshape</em> option</a></h2>
<p>Different geographical representations can be generated, including points and lines. Six possible <code>--geoshape</code> values are accepted:</p>
<div class="table-wrapper"><table><thead><tr><th style="text-align: center">Option</th><th style="text-align: left">Description</th></tr></thead><tbody>
<tr><td style="text-align: center"><code>point-all</code></td><td style="text-align: left">All logged points exported (default if no option passed)</td></tr>
<tr><td style="text-align: center"><code>point-multi</code></td><td style="text-align: left">Exported points correspond to marked/annotated events only</td></tr>
<tr><td style="text-align: center"><code>point-single</code></td><td style="text-align: left">A single, averaged point for each annotation</td></tr>
<tr><td style="text-align: center"><code>line-all</code></td><td style="text-align: left">Polyline from all logged points</td></tr>
<tr><td style="text-align: center"><code>line-multi</code></td><td style="text-align: left">Polyline, corresponds to marked/annotated events only</td></tr>
<tr><td style="text-align: center"><code>circle-2d</code></td><td style="text-align: left">2D polygon, corresponds to marked/annotated events only</td></tr>
<tr><td style="text-align: center"><code>circle-3d</code></td><td style="text-align: left">3D polygon, corresponds to marked/annotated events only</td></tr>
</tbody></table>
</div>
<p><code>--downsample</code> can be used with all these options, but will be ignored for <code>point-single</code>, <code>circle-2d</code>/<code>circle-3d</code> since these will only ever result in a single point per annotation. <code>circle-2d</code> and <code>circle-3d</code> allow for further customisation, such as radius and height (<code>circle-3d</code>, KML-only). The circle options work in the same way as <code>point-single</code> and are currently only a visual flair, since radius and height are not yet derived from ELAN annotation values.</p>
<h3 id="point-all"><a class="header" href="#point-all"><code>point-all</code></a></h3>
<p>All points logged during the recording session will be exported. Any point that intersects with the time span of an annotation will inherit the annotation value as the coordinate description. Points that do not, will have no description.</p>
<pre><code>ELAN-file

─────┼──────────┼──────────┼──────────┼──────&gt;  ELAN time-line
 00:01:35   00:01:40   00:01:45   00:01:50
─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─
  │ Dayum │           │ Chcuh       │           "Feature" tier
  ├───────┤           ├─────────────┤           with annotations
  │       │           │             │           to geo-reference
                      .             .
                      .             .
KML-file              .             .
                      .             .
  + + +         + + + .             .
  ┊     + + + +     ┊ +             + &lt;──────── Logged
  ┊       ┊ ┊       ┊ ┊ +       + + ┊           point
  ┊       ┊ ┊       ┊ ┊   + + +     ┊
  └───┬───┘ └───┬───┘ └──────┬──────┘
      │         │            │
 Points logged  │            │
  within ELAN   │            └ Description for each point in section:
  annotation    │              "Chcuh" (placename)
  time span     │
      │         └ No descriptions for this section,
      │           since there is no corresponding annotation
      │
      └ Description for each point in section: "Dayum" (placename)
</code></pre>
<h3 id="point-multi"><a class="header" href="#point-multi"><code>point-multi</code></a></h3>
<p>Only points that intersect with the time span of an annotation will be exported and will inherit the annotation text as the coordinate description. Points that have no corresponding annotation will be discarded. <em>Useful for including points corresponding to marked events only</em>.</p>
<pre><code>
  + + +
  ┊     + +           +             + &lt;──────── Logged
  ┊       ┊           ┊ +       + + ┊           point
  ┊       ┊           ┊   + + +     ┊
  ┊       ┊           ┊             ┊
  └───┬───┘           └──────┬──────┘
 Points logged               │
  within ELAN                │
  annotation                 └ Description for each point in section:
  time span                    "Chcuh" (placename)
      │
      └ Description for each point in section:
        "Dayum" (placename)
</code></pre>
<h3 id="point-single"><a class="header" href="#point-single"><code>point-single</code></a></h3>
<p>Only points that intersect with the time span of an annotation will be considered for export. The difference to <code>point-multi</code> is that each annotation will only generate a single point: an average of those logged within the annotation's time span. Note that a custom <code>--downsample</code> value will be ignored for <code>point-single</code> since it may affect the result negatively. <code>--downsample</code> also has little use here, since the number of points in the output will not be affected and will be quite low compared to the other options. <em>Useful for distilling marked events, such as place names, to a single point for each event</em>.</p>
<pre><code>
      +
      │
      │
  Average for               +
 points logged              │
  within ELAN               │
  annotation                └ Description for point:
  time span                   "Chcuh" (placename)
      │
      └ Description for point:
        "Dayum" (placename)

</code></pre>
<h3 id="line-all"><a class="header" href="#line-all"><code>line-all</code></a></h3>
<p>All points logged during the recording session will be exported, resulting in a continuous polyline. Sub-sections that intersect with an annotation inherit the annotation value as a description, whereas those that do not will have no description.</p>
<pre><code>ELAN-file

─────┼──────────┼──────────┼──────────┼──────&gt;  ELAN time-line
 00:01:35   00:01:40   00:01:45   00:01:50
─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─
  │ walk down-hill  │        │ walk up-hill │   "Feature" tier
  ├─────────────────┤        ├──────────────┤   with annotations
  │                 │        │              │   to geo-reference


KML-file
  ____           ___
  ┊   \         /   \                           Resulting polyline
  ┊    \_______/    ┊\           ____________   in KML-file, continuous:
  ┊                 ┊ \         /           ┊   only line-sections with
  ┊                 ┊  \_______/            ┊   corresponding annotations
  ┊                 ┊        ┊              ┊   have a description
  └────────┬────────┘        └───────┬──────┘
           │                         │          Description for
   'walk down-hill'           'walk up-hill'    line-section
                                                in KML
</code></pre>
<h3 id="line-multi"><a class="header" href="#line-multi"><code>line-multi</code></a></h3>
<p>Only points that intersect with the time span of an annotation will be exported, resulting in a broken-up line. Each sub-section inherits the value of the annotation it intersects with. <em>Useful for representing paths corresponding to marked events only</em>.</p>
<pre><code>
ELAN-file

─────┼──────────┼──────────┼──────────┼──────&gt;  ELAN time-line
 00:01:35   00:01:40   00:01:45   00:01:50
─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─
  │ walk down-hill  │        │ walk up-hill │   "Feature" tier
  ├─────────────────┤        ├──────────────┤   with annotations
  │                 │        │              │   to geo-reference


KML-file
  ____           ___
  ┊   \         /   \                           Resulting polyline
  ┊    \_______/    ┊            ____________   in KML-file, broken-up:
  ┊                 ┊           /           ┊   line-sections with no
  ┊                 ┊        __/            ┊   corresponding annotation
  ┊                 ┊        ┊              ┊   are discarded
  └────────┬────────┘        └───────┬──────┘
           │                         │          Description for
   'walk down-hill'           'walk up-hill'    line-section
                                                in KML
</code></pre>
<h3 id="circle-2d-circle-3d"><a class="header" href="#circle-2d-circle-3d"><code>circle-2d</code>, <code>circle-3d</code></a></h3>
<p><code>circle-2d</code>, and <code>circle-3d</code> work almost exactly like <code>point-single</code> with the difference that a circle is generated around the calculated average point. It is mostly a visual flair and its shape is currently not affected by annotation values. <code>circle-2d</code> is flat against the ground, whereas <code>circle-3d</code> can take a height value to become a cylindrical 3D shape (only applies to KML, not GeoJSON). If circle output is specified, three more options become available:</p>
<div class="table-wrapper"><table><thead><tr><th style="text-align: center">Option</th><th style="text-align: left">Description</th><th style="text-align: left">Default</th></tr></thead><tbody>
<tr><td style="text-align: center"><code>--height</code></td><td style="text-align: left">Height relative to ground in meters (<code>circle-3d</code>)</td><td style="text-align: left"></td></tr>
<tr><td style="text-align: center"><code>--radius</code></td><td style="text-align: left">Radius in meters (<code>circle-2d</code>, <code>circle-3d</code>)</td><td style="text-align: left"><code>2.0</code></td></tr>
<tr><td style="text-align: center"><code>--vertices</code></td><td style="text-align: left">Roundness, valid range 3 - 255 (3 will literally be triangle)</td><td style="text-align: left"><code>40</code></td></tr>
</tbody></table>
</div><div style="break-before: page; page-break-before: always;"></div><h3 id="the-cdata-option"><a class="header" href="#the-cdata-option">The 'cdata' option</a></h3>
<p>The <code>--cdata</code> option only affects KML-files. It will insert extra information into the KML-file in the form of HTML inside the <code>&lt;description&gt;</code> element for each point (see the <a href="https://developers.google.com/kml/documentation/kml_tut">CDATA section in Google's KML documentation</a>). In Google Earth this results in an information bubble to pop up when a point is clicked on, as a visual flair for e.g. presentations.</p>
<div style="break-before: page; page-break-before: always;"></div><h2 id="locate"><a class="header" href="#locate">locate</a></h2>
<blockquote>
<ul>
<li><em>Command/alias:</em> <code>locate</code> / <code>l</code></li>
<li><em>Help:</em> <code>geoelan locate --help</code></li>
<li><em>Basic usage:</em> <code>geoelan locate --indir INDIR/ --kind gopro</code></li>
</ul>
</blockquote>
<p><code>locate</code> will locate and match original GoPro and VIRB clips in the input folder. For VIRB, corresponding FIT-file/s will also be located. By optionally specifying a UUID (<code>--uuid</code>, <code>--fit</code>) or a clip (<code>--video</code>) in a specific session, only the files in that recording session will be returned. If you are unsure of the location of all relevant files, use an input path closer to the root, such as the root of an external hard drive. If duplicate files are found, the last one encountered will be returned.</p>
<p><strong>Flags</strong></p>
<div class="table-wrapper"><table><thead><tr><th style="text-align: center">Short</th><th style="text-align: center">Long</th><th style="text-align: left">Description</th></tr></thead><tbody>
<tr><td style="text-align: center"></td><td style="text-align: center"><code>--quiet</code></td><td style="text-align: left">Do not print file-by-file search progress</td></tr>
</tbody></table>
</div>
<p><strong>Options</strong></p>
<div class="table-wrapper"><table><thead><tr><th style="text-align: center">Short</th><th style="text-align: center">Long</th><th style="text-align: left">Description</th><th style="text-align: center">Possible</th><th style="text-align: center">Required</th></tr></thead><tbody>
<tr><td style="text-align: center"><code>-i</code></td><td style="text-align: center"><code>--indir</code></td><td style="text-align: left">Input path for locating files</td><td style="text-align: center"></td><td style="text-align: center">yes</td></tr>
<tr><td style="text-align: center"><code>-k</code></td><td style="text-align: center"><code>--kind</code></td><td style="text-align: left">Camera brand</td><td style="text-align: center"><code>virb</code>, <code>gopro</code></td><td style="text-align: center">unless <code>-v</code>, <code>-u</code>, <code>-f</code></td></tr>
<tr><td style="text-align: center"><code>-v</code></td><td style="text-align: center"><code>--video</code></td><td style="text-align: left">Clip in relevant session</td><td style="text-align: center"></td><td style="text-align: center"></td></tr>
<tr><td style="text-align: center"></td><td style="text-align: center"><code>--verify</code></td><td style="text-align: left">[GoPro] Verify GPMF data, ignore corrupt files</td><td style="text-align: center"></td><td style="text-align: center"></td></tr>
<tr><td style="text-align: center"><code>-f</code></td><td style="text-align: center"><code>--fit</code></td><td style="text-align: left">[VIRB] FIT-file for selecting session</td><td style="text-align: center"></td><td style="text-align: center"></td></tr>
<tr><td style="text-align: center"><code>-u</code></td><td style="text-align: center"><code>--uuid</code></td><td style="text-align: left">[VIRB] UUID for clip in session</td><td style="text-align: center"></td><td style="text-align: center"></td></tr>
</tbody></table>
</div>
<p><strong>Example 1</strong></p>
<div class="table-wrapper"><table><thead><tr><th style="text-align: center"></th><th style="text-align: center"></th><th style="text-align: center"></th><th style="text-align: center"></th></tr></thead><tbody>
<tr><td style="text-align: center"><code>geoelan</code></td><td style="text-align: center"><code>locate</code></td><td style="text-align: center"><code>-i INDIR/</code></td><td style="text-align: center"><code>--kind gopro</code></td></tr>
<tr><td style="text-align: center"></td><td style="text-align: center">sub-command</td><td style="text-align: center">input directory</td><td style="text-align: center">consider only GoPro files</td></tr>
</tbody></table>
</div>
<p><strong>Result:</strong> Locates all GoPro clips in <code>INDIR/</code> (<code>-i</code>) and groups them in recording sessions.</p>
<p><strong>Example 2</strong></p>
<div class="table-wrapper"><table><thead><tr><th style="text-align: center"></th><th style="text-align: center"></th><th style="text-align: center"></th><th style="text-align: center"></th></tr></thead><tbody>
<tr><td style="text-align: center"><code>geoelan</code></td><td style="text-align: center"><code>locate</code></td><td style="text-align: center"><code>-i INDIR/</code></td><td style="text-align: center"><code>-v VIRB0001-1.MP4</code></td></tr>
<tr><td style="text-align: center"></td><td style="text-align: center">sub-command</td><td style="text-align: center">input directory</td><td style="text-align: center">clip in relevant session</td></tr>
</tbody></table>
</div>
<p><strong>Result:</strong> Camera brand is detected automatically (in this case VIRB). Locates all clips in <code>INDIR/</code> (<code>-i</code>) for the recording session that contains <code>VIRB0001-1.MP4</code> (<code>-v</code>) together with the corresponding FIT-file.</p>
<div style="break-before: page; page-break-before: always;"></div><h2 id="inspect"><a class="header" href="#inspect">inspect</a></h2>
<blockquote>
<ul>
<li><em>Command/alias:</em> <code>inspect</code> / <code>i</code></li>
<li><em>Help:</em> <code>geoelan inspect --help</code></li>
<li><em>Basic usage:</em>
<ul>
<li>GoPro: <code>geoelan inspect --gpmf GH010026.MP4</code></li>
<li>VIRB: <code>geoelan inspect --fit 2017-01-28-05-16-40.fit</code></li>
<li>MP4: <code>geoelan inspect --video VideoFile.MP4</code></li>
</ul>
</li>
</ul>
</blockquote>
<p><code>inspect</code> can print telemetry contents of a GoPro MP4 or a Garmin FIT-file. Options include filtering to a sub-set of the telemetry, such as GPS-data, and general MP4 structure (any MP4 file can be specified). <code>inspect</code> is more of a technical aid to, for example, verify that the GPS really did log coordinates. KML or GeoJSON files can also be generated.</p>
<p><strong>Flags</strong></p>
<div class="table-wrapper"><table><thead><tr><th style="text-align: center">Short</th><th style="text-align: left">Long</th><th style="text-align: left">Description</th></tr></thead><tbody>
<tr><td style="text-align: center"></td><td style="text-align: left"><code>--debug</code></td><td style="text-align: left">Print FIT definitions and data while parsing</td></tr>
<tr><td style="text-align: center"></td><td style="text-align: left"><code>--kml</code></td><td style="text-align: left">Generate a KML-file</td></tr>
<tr><td style="text-align: center"></td><td style="text-align: left"><code>--ikml</code></td><td style="text-align: left">Generate an indexed KML-file</td></tr>
<tr><td style="text-align: center"></td><td style="text-align: left"><code>--json</code></td><td style="text-align: left">Generate a GeoJSON-file</td></tr>
<tr><td style="text-align: center"></td><td style="text-align: left"><code>--fullgps</code></td><td style="text-align: left">Use full resolution GPS log for KML/JSON (10-18Hz)</td></tr>
<tr><td style="text-align: center"></td><td style="text-align: left"><code>--verbose</code></td><td style="text-align: left">Print all raw data</td></tr>
<tr><td style="text-align: center"></td><td style="text-align: left"><code>--gps</code></td><td style="text-align: left">Print processed GPS log</td></tr>
<tr><td style="text-align: center"></td><td style="text-align: left"><code>--meta</code></td><td style="text-align: left">Print MP4 custom user data (<code>udta</code> atom)</td></tr>
<tr><td style="text-align: center"></td><td style="text-align: left"><code>--atoms</code></td><td style="text-align: left">Print MP4 atom hierarchy</td></tr>
<tr><td style="text-align: center"><code>-s</code></td><td style="text-align: left"><code>--session</code></td><td style="text-align: left">GoPro: Merge session data. VIRB: Select from a list</td></tr>
</tbody></table>
</div>
<p><strong>Options</strong></p>
<div class="table-wrapper"><table><thead><tr><th style="text-align: center">Short</th><th style="text-align: left">Long</th><th style="text-align: left">Description</th><th style="text-align: center">Required</th></tr></thead><tbody>
<tr><td style="text-align: center"><code>-t</code></td><td style="text-align: left"><code>--type</code></td><td style="text-align: left">Data type to print</td><td style="text-align: center"></td></tr>
<tr><td style="text-align: center"><code>-v</code></td><td style="text-align: left"><code>--video</code></td><td style="text-align: left">MP4-file</td><td style="text-align: center">unless <code>-g</code>, <code>-f</code></td></tr>
<tr><td style="text-align: center"></td><td style="text-align: left"><code>--offsets</code></td><td style="text-align: left">Print byte offsets for specified track</td><td style="text-align: center"></td></tr>
<tr><td style="text-align: center"></td><td style="text-align: left"><code>--samples</code></td><td style="text-align: left">Print raw sample data for specified track</td><td style="text-align: center"></td></tr>
<tr><td style="text-align: center"></td><td style="text-align: left"><code>--dump</code></td><td style="text-align: left">Export raw sample data to file for specified track</td><td style="text-align: center"></td></tr>
<tr><td style="text-align: center"><code>-g</code></td><td style="text-align: left"><code>--gpmf</code></td><td style="text-align: left">[GoPro]-file (MP4 or raw GPMF-file)</td><td style="text-align: center">unless <code>-f</code>, <code>-v</code></td></tr>
<tr><td style="text-align: center"><code>-f</code></td><td style="text-align: left"><code>--fit</code></td><td style="text-align: left">[VIRB]FIT-file</td><td style="text-align: center">unless <code>-g</code>, <code>-v</code></td></tr>
</tbody></table>
</div>
<p>Note that <code>--type</code> takes a string for GoPro and a numerical identifier for VIRB. <code>--video</code> accepts any MP4-file. See the sections below.</p>
<div style="break-before: page; page-break-before: always;"></div><h3 id="inspecting-telemetry-and-mp4-files"><a class="header" href="#inspecting-telemetry-and-mp4-files">Inspecting telemetry and MP4 files</a></h3>
<p><code>inspect</code> will mostly print raw values - down to a list of bytes for some kinds of data - that require further processing to be of use. The exact nature of this data differs between GoPro and Garmin. For GPS data, the flag <code>--gps</code> can be used for either device to print a processed GPS-log showing coordinates in decimal degrees etc. Sensor data can also be printed via <code>--sensor &lt;SENSOR_TYPE&gt;</code>. Other GeoELAN commands, such as <code>eaf2geo</code>, always convert data to the relevant forms.</p>
<p>If a GoPro MP4 or a Garmin FIT-file can not be properly parsed, GeoELAN will often return an error message that may hint at the issue. Try <code>inspect</code> on files that raise errors with the other commands.</p>
<h4 id="gopro-1"><a class="header" href="#gopro-1">GoPro</a></h4>
<p>GoPro cameras embed all logged telemetry inside the MP4-files. In contrast to Garmin FIT, data types have no numerical identifier (see below) so internally, text descriptions are used instead.</p>
<p>To list all data types logged in a GoPro MP4-file, run:</p>
<pre><code class="language-sh">geoelan inspect --gpmf GOPROVIDEO.MP4
</code></pre>
<p>This will list all data streams:</p>
<pre><code>Unique data stream types (1018 DEVC streams in total):
    Accelerometer
    Average luminance
    Exposure time (shutter speed)
    Face Coordinates and details
    GPS (Lat., Long., Alt., 2D speed, 3D speed)
    Gyroscope
    Image uniformity
    Predominant hue[[hue, weight], ...]
    Scene classification[[CLASSIFIER_FOUR_CC,prob], ...]
    Sensor ISO
    Sensor read out time
    White Balance RGB gains
    White Balance temperature (Kelvin)
</code></pre>
<p>Use the data names in the list to print raw data for a specific type (note the citation marks):</p>
<pre><code class="language-sh">geoelan inspect --gpmf GOPROVIDEO.MP4 --type "GPS (Lat., Long., Alt., 2D speed, 3D speed)"
</code></pre>
<p>Earlier GoPro models list GPS data as <code>GPS (Lat., Long., Alt., 2D speed, 3D speed)</code>, whereas Hero 11 Black and later models log more data for each point and use <code>GPS (Lat., Long., Alt., 2D, 3D, days, secs, DOP, fix)</code>. Hero 11 Black logs both the old and the new variants, whereas Hero 13 Black only logs to the newer format. Hero 12 Black does not have a GPS module.</p>
<p>Print the GPS log in a more conventional form:</p>
<pre><code class="language-sh">geoelan inspect --gpmf GOPROVIDEO.MP4 --gps
</code></pre>
<p>Export the GPS log as a KML or GeoJSON file:</p>
<pre><code class="language-sh">geoelan inspect --gpmf GOPROVIDEO.MP4 --kml
geoelan inspect --gpmf GOPROVIDEO.MP4 --json
</code></pre>
<h5 id="gpmf-byte-offsets"><a class="header" href="#gpmf-byte-offsets">GPMF byte offsets</a></h5>
<p>GoPro telemetry is stored as samples, interleaved between audio and video samples (and other tracks' samples). To list the sample locations and sizes, run:</p>
<pre><code class="language-sh">geoelan inspect --video GOPROVIDEO.MP4 --offsets "GoPro MET"
</code></pre>
<p><code>GoPro MET</code> is the name of the MP4 track holding timed GPMF data.</p>
<p>This returns a table listing the samples' byte offsets (e.g. <code>@2026761919</code>), their sizes in bytes, and durations:</p>
<pre><code>...
[ 359 GoPro MET/4] @2026761919 size: 7252   duration: 1s1ms
[ 360 GoPro MET/4] @2031934877 size: 7444   duration: 1s1ms
[ 361 GoPro MET/4] @2037379676 size: 7380   duration: 1s1ms
[ 362 GoPro MET/4] @2043168135 size: 7348   duration: 1s1ms
...
</code></pre>
<p>Similarly, you can print raw sample data for a track:</p>
<pre><code class="language-sh">geoelan inspect --video GOPROVIDEO.MP4 --samples "GoPro MET"
</code></pre>
<p>Save all track samples as a file (similar to FFmpeg's track export):</p>
<pre><code class="language-sh">geoelan inspect --video GOPROVIDEO.MP4 --dump "GoPro MET"
</code></pre>
<p>Note that the video data may be many GB in size. GeoELAN will list the total size and prompt the user before saving to disk.</p>
<h5 id="images"><a class="header" href="#images">Images</a></h5>
<p>Original GoPro JPEG-images can also be inspected. These will contain much less GPMF data than the MP4-files, and are currently not used elsewhere in GeoELAN's workflow. If no named data shows up in the summary, try  <code>geoelan inspect --gpmf GOPROIMAGE.JPG --verbose</code> to print the raw data. Early GoPro models do not embed GPMF data in JPEG-images.</p>
<h4 id="garmin-fit"><a class="header" href="#garmin-fit">Garmin FIT</a></h4>
<p>The FIT-format is quite different to GoPro's GPMF, apart from being a separate file. There is among other things, additional information about VIRB recording sessions. The VIRB starts logging to a FIT-file the moment the camera is turned on, and only stops when it is turned off. This means that a single FIT-file may contain data for multiple recording sessions. Data is logged continuously - even between recordings.</p>
<p>Inside a FIT-file, data is identified by a numerical identifier. For example, GPS data is <code>160</code>, also referred to as <code>gps_metadata</code> in the <a href="https://developer.garmin.com/fit/download/">FIT Software Development Kit</a> (FIT SDK). <code>inspect</code> lists both identifiers in the summary table, but only the numerical identifier is logged inside the FIT-file.</p>
<p>List all data types logged in a VIRB FIT-file:</p>
<pre><code class="language-sh">geoelan inspect --fit FITFILE.FIT
</code></pre>
<p>This will return a table:</p>
<pre><code> Global ID | Message type                 | Count
...................................................
         0 | file_id                      |      1
        18 | session                      |      1
        19 | lap                          |      1
        20 | record                       |   6209
        21 | event                        |      1
        22 | UNKNOWN_TYPE_22              |      2
        23 | device_info                  |      3
        34 | activity                     |      1
        49 | file_creator                 |      1
       104 | UNKNOWN_TYPE_104             |    104
       160 | gps_metadata                 |  60114
       161 | camera_event                 |     24
       162 | timestamp_correlation        |      1
       164 | gyroscope_data               |  20405
       165 | accelerometer_data           |  20405
       167 | three_d_sensor_calibration   |     59
       208 | magnetometer_data            |  20405
       209 | barometer_data               |   6209
       210 | one_d_sensor_calibration     |      1
       219 | UNKNOWN_TYPE_219             |      1
...................................................
                                    Total:  133948
</code></pre>
<p>Find "Global ID" for the data type you wish to inspect further. To print GPS data in its "raw" form, run:</p>
<pre><code class="language-sh">geoelan inspect --fit FITFILE.FIT --type 160
</code></pre>
<p>Print the GPS log in a more conventional form:</p>
<pre><code class="language-sh">geoelan inspect --fit FITFILE.FIT --gps
</code></pre>
<p>Save the full GPS log as a KML or GeoJSON file:</p>
<pre><code class="language-sh">geoelan inspect --fit FITFILE.FIT --kml
geoelan inspect --fit FITFILE.FIT --json
</code></pre>
<p>Print a single type of data for a specific recording session:</p>
<pre><code class="language-sh">geoelan inspect --fit FITFILE.FIT --type 160 --session
</code></pre>
<p>This will return a table listing all VIRB recording sessions:</p>
<pre><code> Session | Clips | First UUID in session
............................................................................................
  1.     |  1    | VIRBactioncameraULTRA30_Tall_2688_2016_29..._1_17_2017-01-28-05-16-40.fit
  2.     |  1    | VIRBactioncameraULTRA30_Tall_2688_2016_29..._1_18_2017-01-28-05-16-40.fit
  3.     |  3    | VIRBactioncameraULTRA30_Tall_2688_2016_29..._1_19_2017-01-28-05-16-40.fit
         |       | VIRBactioncameraULTRA30_Tall_2688_2016_29..._2_19_2017-01-28-05-16-40.fit
         |       | VIRBactioncameraULTRA30_Tall_2688_2016_29..._3_19_2017-01-28-05-16-40.fit
  4.     |  1    | VIRBactioncameraULTRA30_Tall_2688_2016_29..._1_20_2017-01-28-05-16-40.fit
  5.     |  1    | VIRBactioncameraULTRA30_Tall_2688_2016_29..._1_21_2017-01-28-05-16-40.fit
............................................................................................
Select session:
</code></pre>
<p>Type the number in the "Session" column for the relevant session. The output will now be limited to the selected recording session. KML and GeoJSON files can be filtered this way as well.</p>
<p>You could also specify recording session via a VIRB MP4-file to achieve the same result:</p>
<pre><code class="language-sh">geoelan inspect --video VIRBVIDEO.MP4 --fit FITFILE.MP4
</code></pre>
<p>To find out the embedded UUID of a VIRB MP4-file, run:</p>
<pre><code class="language-sh">geoelan inspect --video VIRBVIDEO.MP4
</code></pre>
<p>This will return the embedded UUID:</p>
<pre><code>UUID: VIRBactioncameraULTRA30_Expansive_1920_1440_29.9700_3937280306_3af2a648_1_299_2021-05-03-14-23-23.fit
</code></pre>
<p>Most FIT-files, from e.g. watches, bike computers, will work with <code>inspect</code>. Custom developer data is also supported (such fields will be prefixed '<code>DEV</code>' when inspecting). However, some FIT features are exclusive to VIRB, such as UUID and selecting sessions.</p>
<p>Compressed timestamp headers are not supported. In such cases, the tool will report the error and exit. Missing features may or may not be implemented in future versions.</p>
<blockquote>
<p>❗For those who wish to dig deeper, the <a href="https://developer.garmin.com/fit/download/">Garmin FIT Software Development Kit</a> contains a spreadsheet, <code>Profile.xlsx</code>, which lists the kinds of data a FIT-file may contain. Not all of those apply to every device however, and undocumented data types exist.</p>
</blockquote>
<h4 id="videomp4-files"><a class="header" href="#videomp4-files">Video/MP4-files</a></h4>
<p>Some options apply to any MP4-file. Access these by using the <code>--video</code> option.</p>
<p>The <code>--meta</code> flag will show raw (i.e. bytes) content for the so-called user data section (a.k.a. <code>udta</code> atom), where some cameras log custom data. GoPro embeds undocumented GPMF data in this section, which will also be listed. Garmin logs a unique identifier here (the "UUID" mentioned above).</p>
<p>List tracks and information for any MP4 file (GoPro and VIRB files list additional information, such as the unique identifers used for grouping clips into recording sessions):</p>
<pre><code class="language-sh">geoelan inspect --video VIDEOFILE.MP4
</code></pre>
<p>List sample byte offsets for a track in any MP4 file:</p>
<pre><code class="language-sh">geoelan inspect --video VIDEOFILE.MP4 --offsets &lt;TRACK_ID&gt;
</code></pre>
<p>List atom structure in any MP4 file:</p>
<pre><code class="language-sh">geoelan inspect --video VIDEOFILE.MP4 --atoms
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h2 id="plot"><a class="header" href="#plot">plot</a></h2>
<blockquote>
<ul>
<li><em>Command/alias:</em> <code>plot</code> / <code>p</code></li>
<li><em>Help:</em> <code>geoelan plot --help</code></li>
<li><em>Basic usage:</em>
<ul>
<li>GoPro: <code>geoelan plot --gpmf GH010026.MP4 --y-axis accelerometer --x-axis time</code></li>
<li>VIRB: <code>geoelan plot --fit 2017-01-28-05-16-40.fit --y-axis accelerometer --x-axis time</code></li>
</ul>
</li>
</ul>
</blockquote>
<p><code>plot</code> can plot some of the telemetry in a semi-interactive web view, such as sensor data (accelerometer, gyroscope over time or sample count), and GPS data (latitude, longitude, altitude over time or distance - as a plot only, no maps).</p>
<p><strong>Flags:</strong></p>
<div class="table-wrapper"><table><thead><tr><th style="text-align: center">Short</th><th style="text-align: left">Long</th><th style="text-align: left">Description</th></tr></thead><tbody>
<tr><td style="text-align: center"><code>-s</code></td><td style="text-align: left"><code>--session</code></td><td style="text-align: left">Compile telemetry for a recording session.</td></tr>
<tr><td style="text-align: center"></td><td style="text-align: left"><code>--fill</code></td><td style="text-align: left">Fill area under plot.</td></tr>
<tr><td style="text-align: center"><code>-a</code></td><td style="text-align: left"><code>--average</code></td><td style="text-align: left">Generate a linear average for each sensor data cluster</td></tr>
<tr><td style="text-align: center"></td><td style="text-align: left"><code>--gps5</code></td><td style="text-align: left">[GoPro] Force the use of GPS5 for Hero 11</td></tr>
</tbody></table>
</div>
<p><strong>Options:</strong></p>
<div class="table-wrapper"><table><thead><tr><th style="text-align: center">Short</th><th style="text-align: left">Long</th><th style="text-align: left">Description</th></tr></thead><tbody>
<tr><td style="text-align: center"><code>-y</code></td><td style="text-align: left"><code>--y-axis &lt;y-axis&gt;</code></td><td style="text-align: left">Data to plot on Y-axis.</td></tr>
<tr><td style="text-align: center"><code>-x</code></td><td style="text-align: left"><code>--x-axis &lt;x-axis&gt;</code></td><td style="text-align: left">Data to plot on X-axis. Default: count</td></tr>
<tr><td style="text-align: center"><code>-g</code></td><td style="text-align: left"><code>--gpmf &lt;gpmf&gt;</code></td><td style="text-align: left">[GoPro] Unedited GoPro MP4-file, or extracted GPMF-track.</td></tr>
<tr><td style="text-align: center"><code>-i</code></td><td style="text-align: left"><code>--indir</code></td><td style="text-align: left">[GoPro] Input directory for locating GoPro clips.</td></tr>
<tr><td style="text-align: center"><code>-f</code></td><td style="text-align: left"><code>--fit &lt;fit&gt;</code></td><td style="text-align: left">[VIRB] Garmin FIT-file.</td></tr>
</tbody></table>
</div>
<p>Possible Y-axis values:</p>
<ul>
<li><code>acc</code>, <code>accelerometer</code></li>
<li><code>gyr</code>, <code>gyroscope</code></li>
<li><code>grv</code>, <code>gravity</code></li>
<li><code>bar</code>, <code>barometer</code></li>
<li><code>mag</code>, <code>magnetometer</code></li>
<li><code>lat</code>, <code>latitude</code></li>
<li><code>lon</code>, <code>longitude</code></li>
<li><code>alt</code>, <code>altitude</code></li>
<li><code>s2d</code>, <code>speed2d</code></li>
<li><code>s3d</code>, <code>speed3d</code> (scalar only)</li>
<li><code>dop</code>, <code>dilution</code> (dilution of precision)</li>
<li><code>fix</code>, <code>gpsfix</code> (satellite lock level)</li>
</ul>
<p>Possible X-axis value:</p>
<ul>
<li><code>c</code>, <code>count</code></li>
<li><code>t</code>, <code>time</code></li>
<li><code>dst</code>, <code>distance</code></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h2 id="manual"><a class="header" href="#manual">manual</a></h2>
<blockquote>
<ul>
<li><em>Command/alias:</em> <code>manual</code> / <code>m</code></li>
<li><em>Help:</em> <code>geoelan manual --help</code></li>
<li><em>Basic usage:</em> <code>geoelan manual --pdf</code></li>
</ul>
</blockquote>
<p><code>manual</code> exports or prints the contents of this file to screen, bute the full PDF-manual is also embedded within the compiled executable for convenience. Running <code>geoelan manual</code> with no flag prints the full manual to screen.</p>
<p><strong>Flags</strong></p>
<div class="table-wrapper"><table><thead><tr><th style="text-align: left">Long</th><th style="text-align: left">Description</th></tr></thead><tbody>
<tr><td style="text-align: left"></td><td style="text-align: left">Print full plain text version to screen</td></tr>
<tr><td style="text-align: left"><code>--pdf</code></td><td style="text-align: left">Save the full manual as a PDF to current directory</td></tr>
</tbody></table>
</div><div style="break-before: page; page-break-before: always;"></div><h2 id="appendix"><a class="header" href="#appendix">Appendix</a></h2>
<p>A few notes and help texts on ELAN, telemetry formats, video processing etc.</p>
<div style="break-before: page; page-break-before: always;"></div><h3 id="gopro-and-garmin-telemetry-formats"><a class="header" href="#gopro-and-garmin-telemetry-formats">GoPro and Garmin telemetry formats</a></h3>
<p>Only GoPro Hero 5 Black and later use GoPro's GPMF format, earlier models are not supported. There are significant differences between Garmin's FIT-format and GoPro's GPMF-format. Here are a few:</p>
<div class="table-wrapper"><table><thead><tr><th style="text-align: center"></th><th style="text-align: left">Garmin FIT</th><th style="text-align: left">GoPro GPMF</th></tr></thead><tbody>
<tr><td style="text-align: center">Storage form</td><td style="text-align: left">Separate file (binary)</td><td style="text-align: left">Embedded in MP4 (binary)</td></tr>
<tr><td style="text-align: center">Time stamps</td><td style="text-align: left">Explicit, absolute time stamps for each data point</td><td style="text-align: left">Absolute time stamps for GPS log, otherwise mostly derived from MP4 timing</td></tr>
<tr><td style="text-align: center">GPS</td><td style="text-align: left">Each point time stamped</td><td style="text-align: left">18Hz models: Logged once per 1-second cluster. 10Hz models: Timestamps for each point</td></tr>
</tbody></table>
</div>
<p>GoPro 10Hz GPS models are Hero 11 Black and later (Hero 12 Black has no onboard GPS, but Hero 13 Black does). VIRB Ultra 30 logs at 10Hz, but fitness watches usually log at 1Hz. GPS data differs between devices using Garmin's FIT format.</p>
<p>Both GoPro GPMF and Garmin FIT are binary formats, and thus can't be viewed in a text editor.</p>
<h4 id="documentation-and-development"><a class="header" href="#documentation-and-development">Documentation and development</a></h4>
<p>Support for GPMF (GoPro) and FIT (VIRB) formats were written from scratch for GeoELAN with the help of the official documentation for both formats.</p>
<ul>
<li>Garmin FIT development kit and documentation: <a href="https://developer.garmin.com/fit/">https://developer.garmin.com/fit/</a></li>
<li>GoPro GPMF documentation and example code: <a href="https://github.com/gopro/gpmf-parser">https://github.com/gopro/gpmf-parser</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h3 id="gopro-2"><a class="header" href="#gopro-2">GoPro</a></h3>
<h4 id="file-structure"><a class="header" href="#file-structure">File structure</a></h4>
<p>GoPro recording sessions are split over multiple clips depending on recording time, quality settings, and SD card size. GoPro provide an estimate here: <a href="https://community.gopro.com/s/article/GoPro-Camera-File-Chaptering-Information?language=en_US">https://community.gopro.com/s/article/GoPro-Camera-File-Chaptering-Information?language=en_US</a></p>
<h4 id="sd-cards"><a class="header" href="#sd-cards">SD Cards</a></h4>
<p>GoPro cameras use micro SD Cards. GoPro provide recommendations here: <a href="https://community.gopro.com/s/article/microSD-Card-Considerations?language=en_US">https://community.gopro.com/s/article/microSD-Card-Considerations?language=en_US</a>.</p>
<h4 id="internal-file-layout"><a class="header" href="#internal-file-layout">Internal file layout</a></h4>
<p>Starting with Hero 5 Black all GoPro cameras use a telemetry format called GPMF developed by GoPro. Currently, the best overview can be found in their Github repository: <a href="https://github.com/gopro/gpmf-parser">https://github.com/gopro/gpmf-parser</a>.</p>
<div style="break-before: page; page-break-before: always;"></div><h3 id="garmin-virb"><a class="header" href="#garmin-virb">Garmin VIRB</a></h3>
<p>Note that the Garmin VIRB Ultra 30 is no longer available for purchase. Garmin currently has no replacement product.</p>
<h4 id="file-structure-1"><a class="header" href="#file-structure-1">File structure</a></h4>
<p>Example VIRB SDCard file structure:</p>
<pre><code>├── DCIM
│   └── 100_VIRB
│       ├── VIRB0001-1.GLV           Recording session split up
│       ├── VIRB0001-1.MP4           as 10 minutes clips. Low (GLV)
│       ├── VIRB0001-2.GLV           and high (MP4) resolution clips.
│       └── VIRB0001-2.MP4
└── GMetrix
    ├── 2017-01-01-12-00-00.fit      Telemetry files, a.k.a "FIT-files".
    └── 2017-01-02-12-00-00.fit      May contain data, such as GPS-logs,
                                     for multiple recording sessions.
</code></pre>
<h4 id="the-virb-and-the-fit-format"><a class="header" href="#the-virb-and-the-fit-format">The VIRB and the FIT-format</a></h4>
<p>To pair and match VIRB video clips belonging to the same recording sessions with a FIT-file unique identifiers (UUID) are embedded both within the original video clips and the FIT-files. Preserving these are key to synchronise and extract relevant GPS-data.</p>
<p>When synchronising and locating data, GeoELAN will sometimes list all sessions present in the FIT-file. As a help, the number of video clips and the <em>UUID for the first clip</em> in each session is listed.</p>
<p>A single FIT-file may contain telemetry for multiple recording sessions. When the camera is turned on, it immediately starts logging data into a new FIT-file, regardless of a video being recorded or not. The camera will keep logging to this file until completely turned off. If turned on again, a new FIT-file will be created. All data points in a FIT-file are explicitly timestamped, which technically allows synchronisation against any data type in the file. Further, with the help of the built-in GPS, absolute timestamps can be derived for all data types. These can be used for documentation purposes or to synchronise against external data sources.</p>
<p>For geo-referenced annotations, GeoELAN always embeds absolute timestamps in the resulting KML-file.</p>
<p>The VIRB cameras split up recording sessions into video clips, each approximately 10 minutes in length, with no option to turn this off. To link VIRB video to its corresponding telemetry (e.g. coordinates logged by the GPS during the recording session), both the clips and the FIT-file contain UUIDs. When the user starts recording, a "video recording session start" message is logged to the current FIT-file together with the UUID embedded in the first clip, denoting the start of a recording session. Similarly, when recording ends, a "video recording session end" message is logged together with the UUID embedded in the last clip in the session. Since all logged FIT-data is timestamped, this creates a timeline for the session that can be related to any logged data in the FIT-file.</p>
<p><strong>Matching MP4 and FIT-files via embedded UUIDs</strong></p>
<pre><code>                                           ╭─────╮
                    UUID                   │ MP4 │      VIRB001-1.MP4
                   ╭───────────────────&gt;   │     │
                   │                       ╰─────╯
                   │
  "VIRBactioncameraULTRA30_Tall_2688_2016_29.9700       UUID (unique identifier)
   _3937280306_32eed236_1_17_2017-01-28-05-16-40.fit"
                   │
                   │                       ╭─────╮
                   ╰───────────────────&gt;   │ FIT │      2019-01-03-14-23-54.fit
                   Session start/end       │     │
                   message containing UUID ╰─────╯
</code></pre>
<p><strong>Logging telemetry and boundaries for a recording session in a FIT-file</strong></p>
<pre><code>   VIRB turned on    Recording session                    VIRB turned off
          │         ├─────────────────┤                          │
Time    ──┼─────────┼─────────────────┼──────────────────────────┼────&gt;
          .         .                 .                          .
          .         .                 .                          .
          .         ╭─────┬─────┬─────╮                          .
          .         │ MP4 │ MP4 │ MP4 │   Video clips            .
          .         │     │     │     │   in recording session   .
          .         ╰─────┴─────┴─────╯                          .
          .         .  │     │     │  .                          .
          .   VIRB001-1.MP4  │     │  .                          .
          .         VIRB001-2.MP4  │  .                          .
          .         .     VIRB001-3.MP4                          .
          .         .                 .                          .
FIT-file  .         .                 .                          .
time span ├─────────┼─────────────────┼─────────────────────────&gt;│
          │         │                 │                          │
       Logging   Session           Session                    Logging
       starts     start              end                       stops
          .      message           message                       .
          .                                                      .
          └──────────────────────────┬───────────────────────────┘
                                  ╭─────╮
                                  │ FIT │
                                  │     │
                                  ╰─────╯
                          2019-01-03-14-23-54.fit
</code></pre>
<p>The VIRB logs location, barometric pressure, and rotation among many other data types. Since the FIT-format is not a text based data format, and thus cannot be inspected using a text editor, the <code>inspect</code> command allows for some exploration of a FIT-file (see command <em>inspect</em>). GeoELAN will also help out with matching recording sessions to the corresponding FIT-files (see commands <em>virb2eaf</em>, and <em>locate</em>).</p>
<h4 id="preserving-uuids"><a class="header" href="#preserving-uuids">Preserving UUIDs</a></h4>
<p>Concatenating or converting the video clips will usually discard the UUIDs, so the user is advised to save the original video clips. The <code>inspect</code> command can be used to display the UUID for a specific VIRB MP4-file, just run <code>geoelan inspect --video VIRBVIDEO.MP4</code> with no other options.</p>
<p>Most of the commands allow for selecting UUID from those present in the relevant FIT-file when matching files or geo-referencing annotations. The <code>locate</code> command can also be used to locate all files for a specific session.</p>
<h4 id="video-file-management-and-options"><a class="header" href="#video-file-management-and-options">Video file management and options</a></h4>
<p>On the VIRB MicroSD card, the low-resolution clips have a <code>.GLV</code> extension. These are generated by the VIRB for quick viewing on the internal camera display. If available, GeoELAN will prefer to link these in the ELAN-file over the high-resolution video due to their smaller size (both resolutions will still be concatenated by default). GeoELAN will not be able to identify the low-resolution <code>.GLV</code> as such if renamed to <code>.MP4</code> and they may even be mistaken for the high-resolution versions. If you only require the low-resolution videos to be concatenated, use the <code>--low-res-only</code> flag when running <code>virb2eaf</code>. This will ignore the high-resolution <code>.MP4</code>-files as a concatenation target, with an option to copy these as-is (<code>--copy</code>) to the output directory (see the <em>virb2eaf</em> section for further information).</p>
<div style="break-before: page; page-break-before: always;"></div><h3 id="ffmpeg-1"><a class="header" href="#ffmpeg-1">FFmpeg</a></h3>
<p>The <code>cam2eaf</code> command requires <a href="https://www.ffmpeg.org">FFmpeg</a> for joining MP4-clips and to extract the audio track as a WAV-file (required to display a wave form in ELAN while annotating).</p>
<p>The video and audio streams are by default only concatenated, not converted, to avoid data loss and to save time, but note that <strong>VIRB UUID and GoPro telemetry will still be discarded - save the original files</strong>.</p>
<p>There are two main options for installing FFmpeg:</p>
<ol>
<li>Download the <em>static build</em> of FFmpeg, and specify its path using the <code>--ffmpeg</code> option</li>
<li>Install via a <em>package manager</em>. FFmpeg will be automatically available to <code>cam2eaf</code> in this case.</li>
</ol>
<blockquote>
<p><strong>Static build:</strong></p>
<p>The <em>static build</em> option means that the relevant media codecs are included in a single, executable file that can be used as is. The <a href="https://ffmpeg.org/download.html">FFmpeg download page</a> provides links to static builds for macOS, Windows and Linux. Put the downloaded <code>ffmpeg</code>-file in a convenient location and use the <code>--ffmpeg</code> option when running <code>cam2eaf</code>. Optionally moving or <a href="https://en.wikipedia.org/wiki/Symbolic_link">symlinking</a> this file to a directory in <a href="https://en.wikipedia.org/wiki/PATH_(variable)">PATH</a> will yield the same result as using a package manager below.</p>
<p><strong>Package manager:</strong></p>
<p>Installing via a <em>package manager</em> means the <code>ffmpeg</code> command can be executed from anywhere in a terminal. Linux distributions usually come with one pre-installed. For macOS <a href="https://brew.sh">Homebrew</a> is a popular choice, whereas Windows has <a href="https://chocolatey.org">Chocolatey</a> (or <a href="https://docs.microsoft.com/en-us/windows/wsl/">WSL</a>). This option means you do not have to specify the location of <code>ffmpeg</code> each time <code>cam2eaf</code> is run. If a package manager is not for you, go with the <em>static build</em> for your platform.</p>
</blockquote>
<div style="break-before: page; page-break-before: always;"></div><h2 id="elan"><a class="header" href="#elan">ELAN</a></h2>
<p><a href="https://archive.mpi.nl/tla/elan">ELAN</a> is a completely free, advanced tool for time-aligned annotations of audiovisual media developed by the <a href="https://archive.mpi.nl/tla/">The Language Archive</a>, Max Planck Institute for Psycholinguistics in Nijmegen.</p>
<p>While it is well-known in academia, and particularly in the humanities for transcribing recordings, its use goes well beyond this, since anything observed can be annotated, and thus time-aligned. Annotations are multi-layered, and kept aligned in parallel on separate tiers, similar to multi-track audio editors.</p>
<p>The <a href="https://www.mpi.nl/tools/elan/EAF_Annotation_Format_3.0_and_ELAN.pdf">ELAN Annotation Format</a> is XML-based which makes it both human-readable and fairly straightforward to parse.</p>
<ul>
<li>Download (Windows, macOS, Linux): <a href="https://archive.mpi.nl/tla/elan/download">https://archive.mpi.nl/tla/elan/download</a></li>
<li>Documentation: <a href="https://archive.mpi.nl/tla/elan/documentation">https://archive.mpi.nl/tla/elan/documentation</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h2 id="geoelan-rust-crates"><a class="header" href="#geoelan-rust-crates">GeoELAN Rust crates</a></h2>
<p>GeoELAN is written in <a href="https://www.rust-lang.org">Rust</a> and uses four custom libraries (aka crates) that were developed in parallel with the tool itself.</p>
<p>Since these Rust crates are still in development they are not yet available on <a href="https://crates.io">crates.io</a>, but can be specified as a git resource in <code>Cargo.toml</code> (see the respective repository URLs).</p>
<p>Crates were developed for GeoELAN:</p>
<ul>
<li><code>eaf-rs</code>
<ul>
<li>Read, write, and process EAF-files. Uses <a href="https://github.com/tafia/quick-xml">quick-xml</a> and its serialization support via <a href="https://serde.rs">serde</a>.</li>
<li>Repository: <a href="https://github.com/jenslar/eaf-rs">https://github.com/jenslar/eaf-rs</a></li>
</ul>
</li>
<li><code>gpmf-rs</code>:
<ul>
<li>Read GoPro GPMF-data.</li>
<li>Repository: <a href="https://github.com/jenslar/gpmf-rs">https://github.com/jenslar/gpmf-rs</a></li>
</ul>
</li>
<li><code>fit-rs</code>:
<ul>
<li>Read Garmin FIT-files. Supports custom developer messages.</li>
<li>Repository: <a href="https://github.com/jenslar/fit-rs">https://github.com/jenslar/fit-rs</a></li>
</ul>
</li>
<li><code>mp4iter</code>:
<ul>
<li>Extract track information, samples, and read various kind of data in an MP4 file (does not and will not support any kind of media en/decoding).</li>
<li>Repository: <a href="https://github.com/jenslar/mp4iter">https://github.com/jenslar/mp4iter</a></li>
</ul>
</li>
</ul>
<p>Data extracted with both <code>gpmf-rs</code> and <code>fit-rs</code> will mostly require further processing. Support for this is built-in for some data types (e.g. GPS data, since this is fundamental for GeoELAN, some processing of sensor data as well), but for others you will have to develop and expand on this yourself. A first pass, extracting and parsing data, should always work for both crates. GeoELAN's <code>inspect</code> command with the <code>--verbose</code> flag or <code>--type</code> option prints data in this "raw" form.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="references-1"><a class="header" href="#references-1">References</a></h1>
<p>Larsson, Jens, Niclas Burenhult, Nicole Kruspe, Ross. S Purves, Mikael Rothstein and Peter Sercombe. 2020. Integrating behavioral and geospatial data on the timeline: towards new dimensions of analysis. <em>International Journal of Social Research Methodology</em>. doi: <a href="https://doi.org/10.1080/13645579.2020.1763705">10.1080/13645579.2020.1763705</a></p>
<p>ELAN (Version 6.9) [Computer software]. 2025. Nijmegen: Max Planck Institute for Psycholinguistics. Retrieved from https://archive.mpi.nl/tla/elan</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->


                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">

            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr.min.js"></script>
        <script src="mark.min.js"></script>
        <script src="searcher.js"></script>

        <script src="clipboard.min.js"></script>
        <script src="highlight.js"></script>
        <script src="book.js"></script>

        <!-- Custom JS scripts -->

        <script>
        window.addEventListener('load', function() {
            window.setTimeout(window.print, 100);
        });
        </script>

    </div>
    </body>
</html>
