## Step 3/3: Generate a KML-file from geo-referenced ELAN annotations

Now that we have a few annotations, GeoELAN will geo-referenence these by determining which points were logged within each annotation's timespan. Note the different commands between GoPro and VIRB.

This is where you choose the approriate geographical representations for your annotated phenomena. Here are suggestions for the examples in step 2.

> **Points**:
> - the location of a plant or a geographical feature
> - an uttered place name or an animal cry
>
> To get a single, average coordinate for each annotation, use the `--geoshape point-single` option.
>
> **Lines**:
> - types of movement through the landscape
> - narrative reflecting on the immediate surroundings
>
> Two line options may apply to the above. To get a continuous polyline alternating between marked (annotated) and unmarked (un-annotated) events, use the option `--geoshape line-all`. To get a broken-up polyline representing marked events only, use the option `--geoshape line-multi`.
>

There are other options, such as _circle_ output. It is the same as point output with the difference that radius and height can be specified (all circles will have the same size). For a more detailed overview of the possibilities, see the `--geoshape` option for the command _eaf2geo_. Experiment! If you realise one representation is not appropriate after all, re-run GeoELAN with a different option.

### GoPro

**Command**
```sh
geoelan eaf2geo --eaf GH010026.eaf --gpmf INDIR/GH010026.MP4  --geoshape point-single
```

> **Important:** `GH010026.MP4` **must be an unedited GoPro clip from the recording session**, as it was generated by the camera, **not** the video linked in your ELAN file. E.g. the same one specified in step 1.

**Output files**
```
OUTDIR/GH010026/
├── ...                            Existing files
├── GH010026_point-single.kml      New KML-file, one point per annotation in the selected tier
└── GH010026_point-single.geojson  New GeoJSON-file, one point per annotation in the selected tier
```

### VIRB

**Command**
```sh
geoelan eaf2geo --eaf VIRB0001-1.eaf --fit 2003-01-02-12-00-00.fit --geoshape point-single
```

**Output files**
```
OUTDIR/VIRB0001-1/
├── ...                              Existing files
├── VIRB0001-1_point-single.kml      New KML-file, one point per annotation in the selected tier
└── VIRB0001-1_point-single.geojson  New GeoJSON-file, one point per annotation in the selected tier
```

### Explanation of the command

The relevant sub-command is `eaf2geo`. Run `geoelan eaf2geo --help` for an overview.

GeoELAN geo-references all annotations in a single tier (you will be prompted to select tier from a list) for the specified ELAN-file, then generates annotated KML and GeoJSON files where each point represents a single annotation.

By specifying an ELAN-file (`--eaf`) and an original, unedited GoPro MP4-clip (`--gpmf`) or VIRB FIT-file (`--fit`), GeoELAN will synchronise the annotations with the coordinates contained within the MP4/FIT-file. Similar to step 1, all files will be automatically located.

`--geoshape point-single` tells GeoELAN to distill each annotation into a single point (an average of all points withing the annotation timespan). The generated KML/GeoJSON-file will contain as many points as there are annotations in the selected tier. Each point inherits the corresponding annotation value as its description. The KML-file is named according to the selected `--geoshape` option, in this case `GH010026_point-single.kml`/`VIRB0001-1_point-single.kml`.

For the example command for VIRB, the user will be presented with a list of recording sessions present in the FIT-file (see _The FIT-format and the Garmin VIRB_). For GoPro, specifying an original clip, e.g. the same one specified in step 1, is enough.
